!function e(t,r,n){function o(a,u){if(!r[a]){if(!t[a]){var c="function"==typeof require&&require;if(!u&&c)return c(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var f=r[a]={exports:{}};t[a][0].call(f.exports,function(e){var r=t[a][1][e];return o(r||e)},f,f.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){t.exports=e("regenerator-runtime")},{"regenerator-runtime":11}],2:[function(e,t,r){var n=/\b(Array|Date|Object|Math|JSON)\b/g;t.exports=function(e,t){var r,o=function(e){for(var t=[],r=0;r<e.length;r++)~t.indexOf(e[r])||t.push(e[r]);return t}((r=e,r.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\//g,"").replace(n,"").match(/[a-zA-Z_]\w*/g)||[]));t&&"string"==typeof t&&(i=t,t=function(e){return i+e});var i;if(t)return a=e,u=o,c=t,a.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\/|[a-zA-Z_]\w*/g,function(e){return"("==e[e.length-1]?c(e):~u.indexOf(e)?c(e):e});var a,u,c;return o}},{}],3:[function(e,t,r){(function(n){(r=t.exports=e("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},r.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff),!t)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(i=++o)}),e.splice(i,0,n)},r.save=function(e){try{null==e?r.storage.removeItem("debug"):r.storage.debug=e}catch(e){}},r.load=o,r.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},r.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];r.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}};function o(){var e;try{e=r.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}r.enable(o())}).call(this,e("_process"))},{"./debug":4,_process:10}],4:[function(e,t,r){(r=t.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){r.enable("")},r.enable=function(e){r.save(e),r.names=[],r.skips=[];var t,n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(t=0;t<o;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var i=r.instances[t];i.enabled=r.enabled(i.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=e("ms"),r.instances=[],r.names=[],r.skips=[],r.formatters={};function n(e){var t;function n(){if(n.enabled){var e=n,o=+new Date,i=o-(t||o);e.diff=i,e.prev=t,e.curr=o,t=o;for(var a=new Array(arguments.length),u=0;u<a.length;u++)a[u]=arguments[u];a[0]=r.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var c=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return t;c++;var o=r.formatters[n];if("function"==typeof o){var i=a[c];t=o.call(e,i),a.splice(c,1),c--}return t}),r.formatArgs.call(e,a);(n.log||r.log||console.log.bind(console)).apply(e,a)}}return n.namespace=e,n.enabled=r.enabled(e),n.useColors=r.useColors(),n.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return r.colors[Math.abs(n)%r.colors.length]}(e),n.destroy=o,"function"==typeof r.init&&r.init(n),r.instances.push(n),n}function o(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}},{ms:8}],5:[function(e,t,r){var n=e("to-function");t.exports=function(e,t){var r,o={};t=n(t);for(var i=0;i<e.length;++i)o[r=t(e[i],i)]=o[r]||[],o[r].push(e[i]);return o}},{"to-function":13}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});function n(){return Promise.resolve(!navigator.onLine)}r.check=n,r.watch=function(e){var t=function(e,t,r){var n=window[(r?"add":"remove")+"EventListener"];e.split(" ").forEach(function(e){n(e,t)})}.bind(null,"online offline",function(t){return n().then(e)});return t(!0),function(e){t(!1)}}},{}],7:[function(e,t,r){(function(n){!function(e){if("object"==typeof r&&void 0!==t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:this).localforage=e()}}(function(){return function t(r,n,o){function i(u,c){if(!n[u]){if(!r[u]){var s="function"==typeof e&&e;if(!c&&s)return s(u,!0);if(a)return a(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[u]={exports:{}};r[u][0].call(l.exports,function(e){var t=r[u][1][e];return i(t||e)},l,l.exports,t,r,n,o)}return n[u].exports}for(var a="function"==typeof e&&e,u=0;u<o.length;u++)i(o[u]);return i}({1:[function(e,t,r){(function(e){"use strict";var r,n=e.MutationObserver||e.WebKitMutationObserver;if(n){var o=0,i=new n(f),a=e.document.createTextNode("");i.observe(a,{characterData:!0}),r=function(){a.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){f(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(f,0)};else{var u=new e.MessageChannel;u.port1.onmessage=f,r=function(){u.port2.postMessage(0)}}var c,s=[];function f(){c=!0;for(var e,t,r=s.length;r;){for(t=s,s=[],e=-1;++e<r;)t[e]();r=s.length}c=!1}t.exports=function(e){1!==s.push(e)||c||r()}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,r){"use strict";var n=e(1);function o(){}var i={},a=["REJECTED"],u=["FULFILLED"],c=["PENDING"];t.exports=s;function s(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==o&&h(this,e)}s.prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){if("function"!=typeof e&&this.state===u||"function"!=typeof t&&this.state===a)return this;var r=new this.constructor(o);if(this.state!==c){l(r,this.state===u?e:t,this.outcome)}else this.queue.push(new f(r,e,t));return r};function f(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}f.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},f.prototype.otherCallFulfilled=function(e){l(this.promise,this.onFulfilled,e)},f.prototype.callRejected=function(e){i.reject(this.promise,e)},f.prototype.otherCallRejected=function(e){l(this.promise,this.onRejected,e)};function l(e,t,r){n(function(){var n;try{n=t(r)}catch(t){return i.reject(e,t)}n===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,n)})}i.resolve=function(e,t){var r=p(d,t);if("error"===r.status)return i.reject(e,r.value);var n=r.value;if(n)h(e,n);else{e.state=u,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e};function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var r=!1;function n(t){r||(r=!0,i.reject(e,t))}function o(t){r||(r=!0,i.resolve(e,t))}var a=p(function(){t(o,n)});"error"===a.status&&n(a.value)}function p(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}s.resolve=function(e){if(e instanceof this)return e;return i.resolve(new this(o),e)};s.reject=function(e){var t=new this(o);return i.reject(t,e)};s.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);var a=new Array(r),u=0,c=-1,s=new this(o);for(;++c<r;)f(e[c],c);return s;function f(e,o){t.resolve(e).then(function(e){a[o]=e,++u!==r||n||(n=!0,i.resolve(s,a))},function(e){n||(n=!0,i.reject(s,e))})}};s.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);var a=-1,u=new this(o);for(;++a<r;)c=e[a],t.resolve(c).then(function(e){n||(n=!0,i.resolve(u,e))},function(e){n||(n=!0,i.reject(u,e))});var c;return u}},{1:1}],3:[function(e,t,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var o=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function i(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var a=Promise;function u(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function c(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function s(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function f(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var l="local-forage-detect-blob-support",d=void 0,h={},p=Object.prototype.toString,v="readonly",y="readwrite";function g(e){return"boolean"==typeof d?a.resolve(d):(t=e,new a(function(e){var r=t.transaction(l,y),n=i([""]);r.objectStore(l).put(n,"key"),r.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},r.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);e(r||!t||parseInt(t[1],10)>=43)}}).catch(function(){return!1})).then(function(e){return d=e});var t}function m(e){var t=h[e.name],r={};r.promise=new a(function(e,t){r.resolve=e,r.reject=t}),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then(function(){return r.promise}):t.dbReady=r.promise}function b(e){var t=h[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function w(e,t){var r=h[e.name].deferredOperations.pop();if(r)return r.reject(t),r.promise}function _(e,t){return new a(function(r,n){if(h[e.name]=h[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return r(e.db);m(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var a=o.open.apply(o,i);t&&(a.onupgradeneeded=function(t){var r=a.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(l)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(e){e.preventDefault(),n(a.error)},a.onsuccess=function(){r(a.result),b(e)}})}function x(e){return _(e,!1)}function k(e){return _(e,!0)}function C(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,o=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||r){if(r){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function S(e){return i([function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=0;o<t;o++)n[o]=e.charCodeAt(o);return r}(atob(e.data))],{type:e.type})}function E(e){return e&&e.__local_forage_encoded_blob}function j(e){var t=this,r=t._initReady().then(function(){var e=h[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return c(r,e,e),r}function I(e,t,r,n){void 0===n&&(n=1);try{var o=e.db.transaction(e.storeName,t);r(null,o)}catch(o){if(n>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return a.resolve().then(function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),k(e)}).then(function(){return function(e){m(e);for(var t=h[e.name],r=t.forages,n=0;n<r.length;n++){var o=r[n];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,x(e).then(function(t){return e.db=t,C(e)?k(e):t}).then(function(n){e.db=t.db=n;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=n}).catch(function(t){throw w(e,t),t})}(e).then(function(){I(e,t,r,n-1)})}).catch(r);r(o)}}var O={_driver:"asyncStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]=e[n];var o=h[r.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},h[r.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=j);var i=[];function u(){return a.resolve()}for(var c=0;c<o.forages.length;c++){var s=o.forages[c];s!==t&&i.push(s._initReady().catch(u))}var f=o.forages.slice(0);return a.all(i).then(function(){return r.db=o.db,x(r)}).then(function(e){return r.db=e,C(r,t._defaultConfig.version)?k(r):e}).then(function(e){r.db=o.db=e,t._dbInfo=r;for(var n=0;n<f.length;n++){var i=f[n];i!==t&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}})},_support:function(){try{if(!o)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var r=this,n=new a(function(t,n){r.ready().then(function(){I(r._dbInfo,v,function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).openCursor(),u=1;a.onsuccess=function(){var r=a.result;if(r){var n=r.value;E(n)&&(n=S(n));var o=e(n,r.key,u++);void 0!==o?t(o):r.continue()}else t()},a.onerror=function(){n(a.error)}}catch(e){n(e)}})}).catch(n)});return u(n,t),n},getItem:function(e,t){var r=this;e=s(e);var n=new a(function(t,n){r.ready().then(function(){I(r._dbInfo,v,function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),E(e)&&(e=S(e)),t(e)},a.onerror=function(){n(a.error)}}catch(e){n(e)}})}).catch(n)});return u(n,t),n},setItem:function(e,t,r){var n=this;e=s(e);var o=new a(function(r,o){var i;n.ready().then(function(){return i=n._dbInfo,"[object Blob]"===p.call(t)?g(i.db).then(function(e){return e?t:(r=t,new a(function(e,t){var n=new FileReader;n.onerror=t,n.onloadend=function(t){var n=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:n,type:r.type})},n.readAsBinaryString(r)}));var r}):t}).then(function(t){I(n._dbInfo,y,function(i,a){if(i)return o(i);try{var u=a.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var c=u.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),r(t)},a.onabort=a.onerror=function(){var e=c.error?c.error:c.transaction.error;o(e)}}catch(e){o(e)}})}).catch(o)});return u(o,r),o},removeItem:function(e,t){var r=this;e=s(e);var n=new a(function(t,n){r.ready().then(function(){I(r._dbInfo,y,function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){n(a.error)},i.onabort=function(){var e=a.error?a.error:a.transaction.error;n(e)}}catch(e){n(e)}})}).catch(n)});return u(n,t),n},clear:function(e){var t=this,r=new a(function(e,r){t.ready().then(function(){I(t._dbInfo,y,function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;r(e)}}catch(e){r(e)}})}).catch(r)});return u(r,e),r},length:function(e){var t=this,r=new a(function(e,r){t.ready().then(function(){I(t._dbInfo,v,function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){r(i.error)}}catch(e){r(e)}})}).catch(r)});return u(r,e),r},key:function(e,t){var r=this,n=new a(function(t,n){e<0?t(null):r.ready().then(function(){I(r._dbInfo,v,function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName),u=!1,c=a.openCursor();c.onsuccess=function(){var r=c.result;r?0===e?t(r.key):u?t(r.key):(u=!0,r.advance(e)):t(null)},c.onerror=function(){n(c.error)}}catch(e){n(e)}})}).catch(n)});return u(n,t),n},keys:function(e){var t=this,r=new a(function(e,r){t.ready().then(function(){I(t._dbInfo,v,function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).openCursor(),a=[];i.onsuccess=function(){var t=i.result;t?(a.push(t.key),t.continue()):e(a)},i.onerror=function(){r(i.error)}}catch(e){r(e)}})}).catch(r)});return u(r,e),r},dropInstance:function(e,t){t=f.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n;if(e.name){var i=e.name===r.name&&this._dbInfo.db?a.resolve(this._dbInfo.db):x(e).then(function(t){var r=h[e.name],n=r.forages;r.db=t;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=t;return t});n=e.storeName?i.then(function(t){if(t.objectStoreNames.contains(e.storeName)){var r=t.version+1;m(e);var n=h[e.name],i=n.forages;t.close();for(var u=0;u<i.length;u++){var c=i[u];c._dbInfo.db=null,c._dbInfo.version=r}return new a(function(t,n){var i=o.open(e.name,r);i.onerror=function(e){i.result.close(),n(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}}).then(function(e){n.db=e;for(var t=0;t<i.length;t++){var r=i[t];r._dbInfo.db=e,b(r._dbInfo)}}).catch(function(t){throw(w(e,t)||a.resolve()).catch(function(){}),t})}}):i.then(function(t){m(e);var r=h[e.name],n=r.forages;t.close();for(var i=0;i<n.length;i++)n[i]._dbInfo.db=null;return new a(function(t,r){var n=o.deleteDatabase(e.name);n.onerror=n.onblocked=function(e){var t=n.result;t&&t.close(),r(e)},n.onsuccess=function(){var e=n.result;e&&e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<n.length;t++)b(n[t]._dbInfo)}).catch(function(t){throw(w(e,t)||a.resolve()).catch(function(){}),t})})}else n=a.reject("Invalid arguments");return u(n,t),n}};var F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N="~~local_forage_type~",T=/^~~local_forage_type~([^~]+)~/,A="__lfsc__:",P=A.length,R="arbf",L="blob",D="si08",M="ui08",B="uic8",z="si16",q="si32",U="ur16",W="ui32",J="fl32",Q="fl64",G=P+R.length,H=Object.prototype.toString;function $(e){var t,r,n,o,i,a=.75*e.length,u=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var s=new ArrayBuffer(a),f=new Uint8Array(s);for(t=0;t<u;t+=4)r=F.indexOf(e[t]),n=F.indexOf(e[t+1]),o=F.indexOf(e[t+2]),i=F.indexOf(e[t+3]),f[c++]=r<<2|n>>4,f[c++]=(15&n)<<4|o>>2,f[c++]=(3&o)<<6|63&i;return s}function V(e){var t,r=new Uint8Array(e),n="";for(t=0;t<r.length;t+=3)n+=F[r[t]>>2],n+=F[(3&r[t])<<4|r[t+1]>>4],n+=F[(15&r[t+1])<<2|r[t+2]>>6],n+=F[63&r[t+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}var K={serialize:function(e,t){var r="";if(e&&(r=H.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===H.call(e.buffer))){var n,o=A;e instanceof ArrayBuffer?(n=e,o+=R):(n=e.buffer,"[object Int8Array]"===r?o+=D:"[object Uint8Array]"===r?o+=M:"[object Uint8ClampedArray]"===r?o+=B:"[object Int16Array]"===r?o+=z:"[object Uint16Array]"===r?o+=U:"[object Int32Array]"===r?o+=q:"[object Uint32Array]"===r?o+=W:"[object Float32Array]"===r?o+=J:"[object Float64Array]"===r?o+=Q:t(new Error("Failed to get type for BinaryArray"))),t(o+V(n))}else if("[object Blob]"===r){var i=new FileReader;i.onload=function(){var r=N+e.type+"~"+V(this.result);t(A+L+r)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(r){console.error("Couldn't convert value into a JSON string: ",e),t(null,r)}},deserialize:function(e){if(e.substring(0,P)!==A)return JSON.parse(e);var t,r=e.substring(G),n=e.substring(P,G);if(n===L&&T.test(r)){var o=r.match(T);t=o[1],r=r.substring(o[0].length)}var a=$(r);switch(n){case R:return a;case L:return i([a],{type:t});case D:return new Int8Array(a);case M:return new Uint8Array(a);case B:return new Uint8ClampedArray(a);case z:return new Int16Array(a);case U:return new Uint16Array(a);case q:return new Int32Array(a);case W:return new Uint32Array(a);case J:return new Float32Array(a);case Q:return new Float64Array(a);default:throw new Error("Unkown type: "+n)}},stringToBuffer:$,bufferToString:V};function X(e,t,r,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function Y(e,t,r,n,o,i){e.executeSql(r,n,o,function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[name],function(e,u){u.rows.length?i(e,a):X(e,t,function(){e.executeSql(r,n,o,i)},i)},i):i(e,a)},i)}var Z={_driver:"webSQLStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]="string"!=typeof e[n]?e[n].toString():e[n];var o=new a(function(e,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(e){return n(e)}r.db.transaction(function(o){X(o,r,function(){t._dbInfo=r,e()},function(e,t){n(t)})},n)});return r.serializer=K,o},_support:"function"==typeof openDatabase,iterate:function(e,t){var r=this,n=new a(function(t,n){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){Y(r,o,"SELECT * FROM "+o.storeName,[],function(r,n){for(var i=n.rows,a=i.length,u=0;u<a;u++){var c=i.item(u),s=c.value;if(s&&(s=o.serializer.deserialize(s)),void 0!==(s=e(s,c.key,u+1)))return void t(s)}t()},function(e,t){n(t)})})}).catch(n)});return u(n,t),n},getItem:function(e,t){var r=this;e=s(e);var n=new a(function(t,n){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){Y(r,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],function(e,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=o.serializer.deserialize(n)),t(n)},function(e,t){n(t)})})}).catch(n)});return u(n,t),n},setItem:function(e,t,r){return function e(t,r,n,o){var i=this;t=s(t);var c=new a(function(a,u){i.ready().then(function(){void 0===r&&(r=null);var c=r,s=i._dbInfo;s.serializer.serialize(r,function(r,f){f?u(f):s.db.transaction(function(e){Y(e,s,"INSERT OR REPLACE INTO "+s.storeName+" (key, value) VALUES (?, ?)",[t,r],function(){a(c)},function(e,t){u(t)})},function(r){if(r.code===r.QUOTA_ERR){if(o>0)return void a(e.apply(i,[t,c,n,o-1]));u(r)}})})}).catch(u)});return u(c,n),c}.apply(this,[e,t,r,1])},removeItem:function(e,t){var r=this;e=s(e);var n=new a(function(t,n){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){Y(r,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){n(t)})})}).catch(n)});return u(n,t),n},clear:function(e){var t=this,r=new a(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){Y(t,n,"DELETE FROM "+n.storeName,[],function(){e()},function(e,t){r(t)})})}).catch(r)});return u(r,e),r},length:function(e){var t=this,r=new a(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){Y(t,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],function(t,r){var n=r.rows.item(0).c;e(n)},function(e,t){r(t)})})}).catch(r)});return u(r,e),r},key:function(e,t){var r=this,n=new a(function(t,n){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){Y(r,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,r){var n=r.rows.length?r.rows.item(0).key:null;t(n)},function(e,t){n(t)})})}).catch(n)});return u(n,t),n},keys:function(e){var t=this,r=new a(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){Y(t,n,"SELECT key FROM "+n.storeName,[],function(t,r){for(var n=[],o=0;o<r.rows.length;o++)n.push(r.rows.item(o).key);e(n)},function(e,t){r(t)})})}).catch(r)});return u(r,e),r},dropInstance:function(e,t){t=f.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,o=this;return u(n=e.name?new a(function(t){var n;n=e.name===r.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:n,storeNames:[e.storeName]}):t((i=n,new a(function(e,t){i.transaction(function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(t,r){for(var n=[],o=0;o<r.rows.length;o++)n.push(r.rows.item(o).name);e({db:i,storeNames:n})},function(e,r){t(r)})},function(e){t(e)})})));var i}).then(function(e){return new a(function(t,r){e.db.transaction(function(n){function o(e){return new a(function(t,r){n.executeSql("DROP TABLE IF EXISTS "+e,[],function(){t()},function(e,t){r(t)})})}for(var i=[],u=0,c=e.storeNames.length;u<c;u++)i.push(o(e.storeNames[u]));a.all(i).then(function(){t()}).catch(function(e){r(e)})},function(e){r(e)})})}):a.reject("Invalid arguments"),t),n}};function ee(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}function te(){return!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}()||localStorage.length>0}var re={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var r in e)t[r]=e[r];return t.keyPrefix=ee(e,this._defaultConfig),te()?(this._dbInfo=t,t.serializer=K,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var r=this,n=r.ready().then(function(){for(var t=r._dbInfo,n=t.keyPrefix,o=n.length,i=localStorage.length,a=1,u=0;u<i;u++){var c=localStorage.key(u);if(0===c.indexOf(n)){var s=localStorage.getItem(c);if(s&&(s=t.serializer.deserialize(s)),void 0!==(s=e(s,c.substring(o),a++)))return s}}});return u(n,t),n},getItem:function(e,t){var r=this;e=s(e);var n=r.ready().then(function(){var t=r._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n});return u(n,t),n},setItem:function(e,t,r){var n=this;e=s(e);var o=n.ready().then(function(){void 0===t&&(t=null);var r=t;return new a(function(o,i){var a=n._dbInfo;a.serializer.serialize(t,function(t,n){if(n)i(n);else try{localStorage.setItem(a.keyPrefix+e,t),o(r)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||i(e),i(e)}})})});return u(o,r),o},removeItem:function(e,t){var r=this;e=s(e);var n=r.ready().then(function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return u(n,t),n},clear:function(e){var t=this,r=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(e)&&localStorage.removeItem(n)}});return u(r,e),r},length:function(e){var t=this.keys().then(function(e){return e.length});return u(t,e),t},key:function(e,t){var r=this,n=r.ready().then(function(){var t,n=r._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(n.keyPrefix.length)),t});return u(n,t),n},keys:function(e){var t=this,r=t.ready().then(function(){for(var e=t._dbInfo,r=localStorage.length,n=[],o=0;o<r;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&n.push(i.substring(e.keyPrefix.length))}return n});return u(r,e),r},dropInstance:function(e,t){if(t=f.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var n,o=this;return u(n=e.name?new a(function(t){e.storeName?t(ee(e,o._defaultConfig)):t(e.name+"/")}).then(function(e){for(var t=localStorage.length-1;t>=0;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}}):a.reject("Invalid arguments"),t),n}},ne=function(e,t){for(var r=e.length,n=0;n<r;){if((o=e[n])===(i=t)||"number"==typeof o&&"number"==typeof i&&isNaN(o)&&isNaN(i))return!0;n++}var o,i;return!1},oe=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},ie={},ae={},ue={INDEXEDDB:O,WEBSQL:Z,LOCALSTORAGE:re},ce=[ue.INDEXEDDB._driver,ue.WEBSQL._driver,ue.LOCALSTORAGE._driver],se=["dropInstance"],fe=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(se),le={description:"",driver:ce.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function de(e,t){e[t]=function(){var r=arguments;return e.ready().then(function(){return e[t].apply(e,r)})}}function he(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&(oe(t[r])?arguments[0][r]=t[r].slice():arguments[0][r]=t[r])}return arguments[0]}var pe=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r in ue)if(ue.hasOwnProperty(r)){var n=ue[r],o=n._driver;this[r]=o,ie[o]||this.defineDriver(n)}this._defaultConfig=he({},le),this._config=he({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":n(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,r){var n=new a(function(t,r){try{var n=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void r(o);for(var i=fe.concat("_initStorage"),c=0,s=i.length;c<s;c++){var f=i[c];if((!ne(se,f)||e[f])&&"function"!=typeof e[f])return void r(o)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),r=a.reject(t);return u(r,arguments[arguments.length-1]),r}},r=0,n=se.length;r<n;r++){var o=se[r];e[o]||(e[o]=t(o))}}();var l=function(r){ie[n]&&console.info("Redefining LocalForage driver: "+n),ie[n]=e,ae[n]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(l,r):l(!!e._support):l(!0)}catch(e){r(e)}});return c(n,t,r),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,r){var n=ie[e]?a.resolve(ie[e]):a.reject(new Error("Driver not found."));return c(n,t,r),n},e.prototype.getSerializer=function(e){var t=a.resolve(K);return c(t,e),t},e.prototype.ready=function(e){var t=this,r=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return c(r,e,e),r},e.prototype.setDriver=function(e,t,r){var n=this;oe(e)||(e=[e]);var o=this._getSupportedDrivers(e);function i(){n._config.driver=n.driver()}function u(e){return n._extend(e),i(),n._ready=n._initStorage(n._config),n._ready}var s=null!==this._driverSet?this._driverSet.catch(function(){return a.resolve()}):a.resolve();return this._driverSet=s.then(function(){var e=o[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then(function(e){n._driver=e._driver,i(),n._wrapLibraryMethodsWithReady(),n._initDriver=(t=o,function(){var e=0;return function r(){for(;e<t.length;){var o=t[e];return e++,n._dbInfo=null,n._ready=null,n.getDriver(o).then(u).catch(r)}i();var c=new Error("No available storage method found.");return n._driverSet=a.reject(c),n._driverSet}()});var t})}).catch(function(){i();var e=new Error("No available storage method found.");return n._driverSet=a.reject(e),n._driverSet}),c(this._driverSet,t,r),this._driverSet},e.prototype.supports=function(e){return!!ae[e]},e.prototype._extend=function(e){he(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var o=e[r];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=fe.length;e<t;e++)de(this,fe[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=pe},{3:3}]},{},[4])(4)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,r){var n=1e3,o=60*n,i=60*o,a=24*i,u=365.25*a;t.exports=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*u;case"days":case"day":case"d":return r*a;case"hours":case"hour":case"hrs":case"hr":case"h":return r*i;case"minutes":case"minute":case"mins":case"min":case"m":return r*o;case"seconds":case"second":case"secs":case"sec":case"s":return r*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===r&&!1===isNaN(e))return t.long?c(s=e,a,"day")||c(s,i,"hour")||c(s,o,"minute")||c(s,n,"second")||s+" ms":function(e){if(e>=a)return Math.round(e/a)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=o)return Math.round(e/o)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);var s;throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function c(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}},{}],9:[function(e,t,r){!function(e,r){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=r():"function"==typeof define&&define.amd?define([],r):e.objectPath=r()}(this,function(){"use strict";var e=Object.prototype.toString;function t(e,t){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}function r(e){if(!e)return!0;if(o(e)&&0===e.length)return!0;if("string"!=typeof e){for(var r in e)if(t(e,r))return!1;return!0}return!1}function n(t){return e.call(t)}var o=Array.isArray||function(t){return"[object Array]"===e.call(t)};function i(e){var t=parseInt(e);return t.toString()===e?t:e}function a(e){e=e||{};var a=function(e){return Object.keys(a).reduce(function(t,r){return"create"===r?t:("function"==typeof a[r]&&(t[r]=a[r].bind(a,e)),t)},{})};function u(r,n){return e.includeInheritedProps||"number"==typeof n&&Array.isArray(r)||t(r,n)}function c(e,t){if(u(e,t))return e[t]}function s(e,t,r,n){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if("string"==typeof t)return s(e,t.split(".").map(i),r,n);var o=t[0],a=c(e,o);return 1===t.length?(void 0!==a&&n||(e[o]=r),a):(void 0===a&&("number"==typeof t[1]?e[o]=[]:e[o]={}),s(e[o],t.slice(1),r,n))}return a.has=function(r,n){if("number"==typeof n?n=[n]:"string"==typeof n&&(n=n.split(".")),!n||0===n.length)return!!r;for(var a=0;a<n.length;a++){var u=i(n[a]);if(!("number"==typeof u&&o(r)&&u<r.length||(e.includeInheritedProps?u in Object(r):t(r,u))))return!1;r=r[u]}return!0},a.ensureExists=function(e,t,r){return s(e,t,r,!0)},a.set=function(e,t,r,n){return s(e,t,r,n)},a.insert=function(e,t,r,n){var i=a.get(e,t);n=~~n,o(i)||(i=[],a.set(e,t,i)),i.splice(n,0,r)},a.empty=function(e,t){if(!r(t)&&null!=e){var i,c;if(i=a.get(e,t)){if("string"==typeof i)return a.set(e,t,"");if("boolean"==typeof(f=i)||"[object Boolean]"===n(f))return a.set(e,t,!1);if("number"==typeof i)return a.set(e,t,0);if(o(i))i.length=0;else{if("object"!=typeof(s=i)||"[object Object]"!==n(s))return a.set(e,t,null);for(c in i)u(i,c)&&delete i[c]}var s,f}}},a.push=function(e,t){var r=a.get(e,t);o(r)||(r=[],a.set(e,t,r)),r.push.apply(r,Array.prototype.slice.call(arguments,2))},a.coalesce=function(e,t,r){for(var n,o=0,i=t.length;o<i;o++)if(void 0!==(n=a.get(e,t[o])))return n;return r},a.get=function(e,t,r){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if(null==e)return r;if("string"==typeof t)return a.get(e,t.split("."),r);var n=i(t[0]),o=c(e,n);return void 0===o?r:1===t.length?o:a.get(e[n],t.slice(1),r)},a.del=function(e,t){if("number"==typeof t&&(t=[t]),null==e)return e;if(r(t))return e;if("string"==typeof t)return a.del(e,t.split("."));var n=i(t[0]);return u(e,n)?1!==t.length?a.del(e[n],t.slice(1)):(o(e)?e.splice(n,1):delete e[n],e):e},a}var u=a();return u.create=a,u.withInheritedProps=a({includeInheritedProps:!0}),u})},{}],10:[function(e,t,r){var n,o,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{o="function"==typeof clearTimeout?clearTimeout:u}catch(e){o=u}}();function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}var s,f=[],l=!1,d=-1;function h(){l&&s&&(l=!1,s.length?f=s.concat(f):d=-1,f.length&&p())}function p(){if(!l){var e=c(h);l=!0;for(var t=f.length;t;){for(s=f,f=[];++d<t;)s&&s[d].run();d=-1,t=f.length}s=null,l=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===u||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];f.push(new v(e,t)),1!==f.length||l||c(p)};function v(e,t){this.fun=e,this.array=t}v.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={};function y(){}i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],11:[function(e,t,r){var n=function(){return this}()||Function("return this")(),o=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,i=o&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=e("./runtime"),o)n.regeneratorRuntime=i;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}},{"./runtime":12}],12:[function(e,t,r){!function(e){"use strict";var r,n=Object.prototype,o=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag",s="object"==typeof t,f=e.regeneratorRuntime;if(f)s&&(t.exports=f);else{(f=e.regeneratorRuntime=s?t.exports:{}).wrap=w;var l="suspendedStart",d="suspendedYield",h="executing",p="completed",v={},y={};y[a]=function(){return this};var g=Object.getPrototypeOf,m=g&&g(g(N([])));m&&m!==n&&o.call(m,a)&&(y=m);var b=C.prototype=x.prototype=Object.create(y);k.prototype=b.constructor=C,C.constructor=k,C[c]=k.displayName="GeneratorFunction",f.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},f.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(b),e},f.awrap=function(e){return{__await:e}},S(E.prototype),E.prototype[u]=function(){return this},f.AsyncIterator=E,f.async=function(e,t,r,n){var o=new E(w(e,t,r,n));return f.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},S(b),b[c]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},f.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},f.values=N,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,o){return u.type="throw",u.arg=e,t.next=n,o&&(t.method="next",t.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),s=o.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),v}}}function w(e,t,r,n){var o=t&&t.prototype instanceof x?t:x,i=Object.create(o.prototype),a=new F(n||[]);return i._invoke=function(e,t,r){var n=l;return function(o,i){if(n===h)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=j(a,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var c=_(e,t,r);if("normal"===c.type){if(n=r.done?p:d,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=p,r.method="throw",r.arg=c.arg)}}}(e,r,a),i}function _(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function x(){}function k(){}function C(){}function S(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function E(e){var t;this._invoke=function(r,n){function i(){return new Promise(function(t,i){!function t(r,n,i,a){var u=_(e[r],e,n);if("throw"!==u.type){var c=u.arg,s=c.value;return s&&"object"==typeof s&&o.call(s,"__await")?Promise.resolve(s.__await).then(function(e){t("next",e,i,a)},function(e){t("throw",e,i,a)}):Promise.resolve(s).then(function(e){c.value=e,i(c)},a)}a(u.arg)}(r,n,t,i)})}return t=t?t.then(i,i):i()}}function j(e,t){var n=e.iterator[t.method];if(n===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=r,j(e,t),"throw"===t.method))return v;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=_(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,v;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,v):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function N(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=r,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},{}],13:[function(e,t,r){var n;try{n=e("props")}catch(t){n=e("component-props")}t.exports=o;function o(e){switch({}.toString.call(e)){case"[object Object]":return function(e){var t={};for(var r in e)t[r]="string"==typeof e[r]?i(e[r]):o(e[r]);return function(e){if("object"!=typeof e)return!1;for(var r in t){if(!(r in e))return!1;if(!t[r](e[r]))return!1}return!0}}(e);case"[object Function]":return e;case"[object String]":return/^ *\W+/.test(r=e)?new Function("_","return _ "+r):new Function("_","return "+function(e){var t=n(e);if(!t.length)return"_."+e;var r,o,i;for(o=0;o<t.length;o++)i=t[o],e=a(i,e,r="('function' == typeof "+(r="_."+i)+" ? "+r+"() : "+r+")");return e}(r));case"[object RegExp]":return t=e,function(e){return t.test(e)};default:return i(e)}var t,r}function i(e){return function(t){return e===t}}function a(e,t,r){return t.replace(new RegExp("(\\.)?"+e,"g"),function(e,t){return t?e:r})}},{"component-props":2,props:2}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={defaultStorage:"localstorage",prefix:"sq_jobs",timeout:1e3,limit:-1,principle:"fifo",network:!1,debug:!0}},{}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("./config.data"),a=(n=i,n&&n.__esModule?n:{default:n});var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=a.default,this.merge(t)}return o(e,[{key:"set",value:function(e,t){this.config[e]=t}},{key:"get",value:function(e){return this.config[e]}},{key:"has",value:function(e){return Object.prototype.hasOwnProperty.call(this.config,e)}},{key:"merge",value:function(e){this.config=Object.assign({},this.config,e)}},{key:"remove",value:function(e){return delete this.config[e]}},{key:"all",value:function(){return this.config}}]),e}();r.default=u},{"./config.data":14}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._container={}}return n(e,[{key:"has",value:function(e){return Object.prototype.hasOwnProperty.call(this._container,e)}},{key:"get",value:function(e){return this._container[e]}},{key:"all",value:function(){return this._container}},{key:"bind",value:function(e,t){this._container[e]=t}},{key:"remove",value:function(e){return!!this.has(e)&&delete this._container[e]}},{key:"removeAll",value:function(){this._container={}}}]),e}();r.default=o},{}],17:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={queue:{created:"New task created.",next:"Next task processing.",starting:"Queue listener starting.",stopping:"Queue listener stopping.",stopped:"Queue listener stopped.",empty:"channel is empty...","not-found":"job not found",offline:"Disconnected",online:"Connected"},event:{created:"New event created",fired:"Event fired.","wildcard-fired":"Wildcard event fired."}}},{}],18:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store={},this.verifierPattern=/^[a-z0-9\-\_]+\:before$|after$|retry$|\*$/,this.wildcards=["*","error"],this.emptyFunc=function(){},this.store.before={},this.store.after={},this.store.retry={},this.store.wildcard={},this.store.error=this.emptyFunc,this.store["*"]=this.emptyFunc}return n(e,[{key:"on",value:function(e,t){if("function"!=typeof t)throw new Error("Event should be an function");this.isValid(e)&&this.add(e,t)}},{key:"emit",value:function(e,t){if(this.wildcards.indexOf(e)>-1)this.wildcard.apply(this,[e].concat(Array.prototype.slice.call(arguments)));else{var r=this.getType(e),n=this.getName(e);if(this.store[r]){(this.store[r][n]||this.emptyFunc).call(null,t)}}this.wildcard("*",e,t)}},{key:"wildcard",value:function(e,t,r){this.store.wildcard[e]&&this.store.wildcard[e].call(null,t,r)}},{key:"add",value:function(e,t){if(this.wildcards.indexOf(e)>-1)this.store.wildcard[e]=t;else{var r=this.getType(e),n=this.getName(e);this.store[r][n]=t}}},{key:"has",value:function(e){try{var t=e.split(":");return t.length>1?!!this.store[t[1]][t[0]]:!!this.store.wildcard[t[0]]}catch(e){return!1}}},{key:"getName",value:function(e){return e.match(/(.*)\:.*/)[1]}},{key:"getType",value:function(e){return e.match(/^[a-z0-9\-\_]+\:(.*)/)[1]}},{key:"isValid",value:function(e){return this.verifierPattern.test(e)||this.wildcards.indexOf(e)>-1}}]),e}();r.default=o},{}],19:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.canMultiple=r.retryProcess=r.failedJobHandler=r.successJobHandler=r.lockTask=r.createTimeout=r.removeTask=r.saveTask=r.getTasksWithoutFreezed=void 0;var o=v(e("babel-runtime/regenerator")),i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)},u=(r.getTasksWithoutFreezed=function(){var e=g(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.call(this).all();case 2:return e.t0=p.excludeSpecificTasks.bind(["freezed"]),e.abrupt("return",e.sent.filter(e.t0));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r.saveTask=function(){var e=g(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.call(this).save(_(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),r.removeTask=function(){var e=g(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.call(this).delete(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),c=(r.createTimeout=function(){var e=g(o.default.mark(function e(){var t,r,n,i,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return clearTimeout(this.currentTimeout),e.next=3,m.call(this).fetch();case 3:if(void 0!==(t=e.sent.shift())){e.next=8;break}return b.call(this,"queue.empty",this.currentChannel),k.call(this),e.abrupt("return",1);case 8:if(this.container.has(t.handler)){e.next=15;break}return b.call(this,"queue.not-found",t.handler),e.next=12,f.call(this,t);case 12:return e.next=14,e.sent.call();case 14:return e.abrupt("return",1);case 15:return r=this.container.get(t.handler),n=new r.handler,i=n.timeout||this.config.get("timeout"),e.next=20,x.call(this,t,r,n);case 20:return e.t0=this,a=e.sent.bind(e.t0),e.abrupt("return",this.currentTimeout=setTimeout(a,i));case 23:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r.lockTask=function(){var e=g(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.call(this).update(t._id,{locked:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),s=r.successJobHandler=function(){var e=g(o.default.mark(function e(t,r){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this,e.abrupt("return",function(){var e=g(o.default.mark(function e(i){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.call(n,i,t,r),C.call(n,"after",r,t.args),w.call(n,t,"after"),e.next=5,n.next();case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),f=r.failedJobHandler=function(){var e=g(o.default.mark(function e(t,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=g(o.default.mark(function e(r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u.call(this,t._id),this.event.emit("error",t),e.next=4,this.next();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),l=r.retryProcess=function(){var e=g(o.default.mark(function e(t,r){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w.call(this,t,"retry"),(n=j.call(this,t,r)).locked=!1,e.next=5,m.call(this).update(t._id,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}();r.canMultiple=function(){var e=g(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("object"===(void 0===t?"undefined":a(t))&&!0===t.unique){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,this.hasByTag(t.tag);case 4:return e.t0=e.sent,e.abrupt("return",e.t0<1);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();r.db=m,r.logProxy=b,r.dispatchEvents=w,r.checkPriority=_,r.loopHandler=x,r.stopQueue=k,r.fireJobInlineEvent=C,r.dispatchProcess=S,r.successProcess=E,r.statusOff=function(){this.running=!1},r.updateRetry=j,r.registerJobs=function(){if(h.default.isRegistered)return;var e=h.default.jobs||[],t=!0,r=!1,n=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var u=o.value,c=u.handler.toString(),s=c.match(/function\s([a-zA-Z_]+).*?/),f=i(s,2),l=(f[0],f[1]);l&&this.container.bind(l,u)}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}h.default.isRegistered=!0},r.checkNetwork=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.onLine,t=this.config.get("network");return!(!e&&t)},r.removeNetworkEvent=function(){"function"==typeof this.networkObserver&&this.networkObserver()},r.createNetworkEvent=function(e){e&&(this.networkObserver=(0,d.watch)(I.bind(this)))},r.queueCtrl=I;var d=e("is-offline"),h=v(e("./queue")),p=e("./utils");v(e("./storage-capsule"));function v(e){return e&&e.__esModule?e:{default:e}}function y(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function g(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(o,i){try{var a=t[o](i),u=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}function m(){return this.storage.channel(this.currentChannel)}function b(e,t){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];p.log.call.apply(p.log,[this.config.get("debug")].concat(Array.prototype.slice.call(arguments)))}function w(e,t){if(!("tag"in e))return!1;var r=[[e.tag+":"+t,"fired"],[e.tag+":*","wildcard-fired"]],n=!0,o=!1,i=void 0;try{for(var a,u=r[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var c=a.value;this.event.emit(c[0],e),b.call(this,"event."+c[1],c[0])}}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}}function _(e){return e.priority=e.priority||0,isNaN(e.priority)&&(e.priority=0),e}function x(e,t,r){return g(o.default.mark(function n(){var i,a,u;return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=this,n.next=3,c.call(a,e);case 3:return C.call(this,"before",r,e.args),w.call(this,e,"before"),u=Object.values(t.deps||{}),n.t1=(i=r.handle).call.apply(i,[r,e.args].concat(y(u))),n.next=9,s.call(a,e,r);case 9:return n.t2=a,n.t3=n.sent.bind(n.t2),n.t0=n.t1.then.call(n.t1,n.t3),n.next=14,f.call(a,e,r);case 14:n.t4=a,n.t5=n.sent.bind(n.t4),n.t0.catch.call(n.t0,n.t5);case 17:case"end":return n.stop()}},n,this)}))}function k(){this.stop(),clearTimeout(this.currentTimeout),b.call(this,"queue.stopped","stop")}function C(e,t,r){if(!(0,p.hasMethod)(t,e))return!1;"before"==e&&(0,p.isFunction)(t.before)?t.before.call(t,r):"after"==e&&(0,p.isFunction)(t.after)&&t.after.call(t,r)}function S(e,t,r){e?E.call(this,t,r):l.call(this,t,r)}function E(e,t){u.call(this,e._id)}function j(e,t){return"retry"in t||(t.retry=1),"tried"in e||(e.tried=0,e.retry=t.retry),++e.tried,e.tried>=t.retry&&(e.freezed=!0),e}function I(e){var t=this.channels[this.currentChannel];e?(t.forceStop(),b.call(this,"queue.offline","offline")):(setTimeout(t.start.bind(this),2e3),b.call(this,"queue.online","online"))}},{"./queue":21,"./storage-capsule":22,"./utils":25,"babel-runtime/regenerator":1,"is-offline":6}],20:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=e("./queue"),i=(n=o,n&&n.__esModule?n:{default:n});window.Queue=i.default,r.default=i.default},{"./queue":21}],21:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=f(e("babel-runtime/regenerator")),o=(f(e("./storage/localstorage")),f(e("./container"))),i=f(e("./storage-capsule")),a=f(e("./config")),u=f(e("./event")),c=e("./utils"),s=e("./helpers");function f(e){return e&&e.__esModule?e:{default:e}}function l(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(o,i){try{var a=t[o](i),u=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}var d=function(){e.FIFO="fifo",e.LIFO="lifo";function e(t){(function(t){this.channels={},this.config=new a.default(t),this.storage=new i.default(this.config,e.storageDriver),this.timeout=this.config.get("timeout");var r=this.config.get("network");s.createNetworkEvent.call(this,r)}).call(this,t)}return e.prototype.currentChannel,e.prototype.stopped=!0,e.prototype.running=!1,e.prototype.event=new u.default,e.prototype.container=new o.default,e.prototype.add=function(){var e=l(n.default.mark(function e(t){var r;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s.canMultiple.call(this,t)){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,s.saveTask.call(this,t);case 4:if(!(r=e.sent)||!this.stopped||!0!==this.running){e.next=8;break}return e.next=8,this.start();case 8:return s.logProxy.call(this,"queue.created",t.handler),e.abrupt("return",r);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),e.prototype.next=l(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.stopped){e.next=3;break}return s.statusOff.call(this),e.abrupt("return",s.stopQueue.call(this));case 3:return s.logProxy.call(this,"queue.next","next"),e.next=6,this.start();case 6:case"end":return e.stop()}},e,this)})),e.prototype.start=l(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s.checkNetwork.call(this)){e.next=2;break}return e.abrupt("return",!1);case 2:return this.stopped=!1,s.registerJobs.call(this),s.logProxy.call(this,"queue.starting","start"),e.next=7,s.createTimeout.call(this);case 7:return e.t0=e.sent,this.running=e.t0>0,e.abrupt("return",this.running);case 10:case"end":return e.stop()}},e,this)})),e.prototype.stop=function(){s.logProxy.call(this,"queue.stopping","stop"),this.stopped=!0},e.prototype.forceStop=function(){s.stopQueue.call(this)},e.prototype.create=function(e){return e in this.channels||(this.currentChannel=e,this.channels[e]=(0,c.clone)(this)),this.channels[e]},e.prototype.channel=function(e){if(!this.channels[e])throw new Error('Channel of "'+e+'" not found');return this.channels[e]},e.prototype.isEmpty=l(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.count();case 2:return e.t0=e.sent,e.abrupt("return",e.t0<1);case 4:case"end":return e.stop()}},e,this)})),e.prototype.count=l(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getTasksWithoutFreezed.call(this);case 2:return e.abrupt("return",e.sent.length);case 3:case"end":return e.stop()}},e,this)})),e.prototype.countByTag=function(){var e=l(n.default.mark(function e(t){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getTasksWithoutFreezed.call(this);case 2:return e.t0=function(e){return e.tag===t},e.abrupt("return",e.sent.filter(e.t0).length);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),e.prototype.clear=function(){return!!this.currentChannel&&(this.storage.clear(this.currentChannel),!0)},e.prototype.clearByTag=function(){var e=l(n.default.mark(function e(t){var r=this;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.db.call(this).all();case 2:e.t0=c.utilClearByTag.bind(t),e.t1=function(e){return s.db.call(r).delete(e._id)},e.sent.filter(e.t0).forEach(e.t1);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),e.prototype.has=function(){var e=l(n.default.mark(function e(t){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getTasksWithoutFreezed.call(this);case 2:return e.t0=function(e){return e._id===t},e.t1=e.sent.findIndex(e.t0),e.t2=-1,e.abrupt("return",e.t1>e.t2);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),e.prototype.hasByTag=function(){var e=l(n.default.mark(function e(t){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getTasksWithoutFreezed.call(this);case 2:return e.t0=function(e){return e.tag===t},e.t1=e.sent.findIndex(e.t0),e.t2=-1,e.abrupt("return",e.t1>e.t2);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),e.prototype.setTimeout=function(e){this.timeout=e,this.config.set("timeout",e)},e.prototype.setLimit=function(e){this.config.set("limit",e)},e.prototype.setPrefix=function(e){this.config.set("prefix",e)},e.prototype.setPrinciple=function(e){this.config.set("principle",e)},e.prototype.setDebug=function(e){this.config.set("debug",e)},e.prototype.setNetwork=function(e){this.config.set("network",e),s.removeNetworkEvent.call(this),s.createNetworkEvent.call(this,e)},e.prototype.setStorage=function(e){this.config.set("storage",e)},e.prototype.on=function(e,t){var r;(r=this.event).on.apply(r,arguments),s.logProxy.call(this,"event.created",e)},e.register=function(t){if(!(t instanceof Array))throw new Error("Queue jobs should be objects within an array");e.isRegistered=!1,e.jobs=t},e.storage=function(t){e.storageDriver=t},e}();r.default=d},{"./config":15,"./container":16,"./event":18,"./helpers":19,"./storage-capsule":22,"./storage/localstorage":24,"./utils":25,"babel-runtime/regenerator":1}],22:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0});var o=f(e("babel-runtime/regenerator")),i="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=f(e("group-by")),c=(f(e("./storage/localstorage")),f(e("./config")),e("./utils")),s=f(e("./storage/localforage"));function f(e){return e&&e.__esModule?e:{default:e}}function l(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(o,i){try{var a=t[o](i),u=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}var d=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.storage=this.initStorage(r)}return a(e,[{key:"initStorage",value:function(e){return"object"===(void 0===e?"undefined":i(e))?e:"function"==typeof e?new e(this.config):new s.default(this.config)}},{key:"channel",value:function(e){return this.storageChannel=e,this}},{key:"fetch",value:function(){var e=l(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all();case 2:return e.t0=c.excludeSpecificTasks,t=e.sent.filter(e.t0),r=(0,u.default)(t,"priority"),e.abrupt("return",Object.keys(r).map(function(e){return parseInt(e)}).sort(function(e,t){return t-e}).reduce(this.reduceTasks(r),[]));case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=l(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.get(this.storageChannel);case 2:return r=e.sent,e.next=5,this.isExceeded();case 5:if(!e.sent){e.next=8;break}return console.warn("Task limit exceeded: The '"+this.storageChannel+"' channel limit is "+this.config.get("limit")),e.abrupt("return",!1);case 8:return t=this.prepareTask(t),r.push(t),e.next=12,this.storage.set(this.storageChannel,r);case 12:return e.abrupt("return",t._id);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=l(o.default.mark(function e(t,r){var n,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all();case 2:if(n=e.sent,console.log("ddd->",n),!((i=n.findIndex(function(e){return e._id==t}))<0)){e.next=7;break}return e.abrupt("return",!1);case 7:return n[i]=Object.assign({},n[i],r),e.next=10,this.storage.set(this.storageChannel,n);case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=l(o.default.mark(function e(t){var r,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all();case 2:if(r=e.sent,!((n=r.findIndex(function(e){return e._id===t}))<0)){e.next=6;break}return e.abrupt("return",!1);case 6:return delete r[n],e.next=9,this.storage.set(this.storageChannel,r.filter(function(e){return e}));case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"all",value:function(){return this.storage.get(this.storageChannel)}},{key:"generateId",value:function(){return(65536*(1+Math.random())).toString(16)}},{key:"prepareTask",value:function(e){return e.createdAt=Date.now(),e._id=this.generateId(),e}},{key:"reduceTasks",value:function(e){var t=this;return function(r,n){return"lifo"===t.config.get("principle")?r.concat(e[n].sort(c.lifo)):r.concat(e[n].sort(c.fifo))}.bind(this)}},{key:"isExceeded",value:function(){var e=l(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.config.get("limit"),e.next=3,this.all();case 3:return e.t0=c.excludeSpecificTasks,r=e.sent.filter(e.t0),console.log("fff->",t,r,!(-1===t||t>r.length)),e.abrupt("return",!(-1===t||t>r.length));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"clear",value:function(e){this.storage.clear(e)}}]),e}();r.default=d},{"./config":15,"./storage/localforage":23,"./storage/localstorage":24,"./utils":25,"babel-runtime/regenerator":1,"group-by":5}],23:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=a(e("babel-runtime/regenerator")),o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=a(e("localforage"));function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(o,i){try{var a=t[o](i),u=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.drivers=["localstorage","indexeddb","websql"],this.config=t,this.prefix=this.config.get("prefix"),i.default.config({driver:this.getDriver(),name:this.prefix})}return o(e,[{key:"get",value:function(){var e=u(n.default.mark(function e(t){var r;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.getItem(this.storageName(t));case 2:return r=e.sent,e.abrupt("return",("string"==typeof r?JSON.parse(r):r)||[]);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=u(n.default.mark(function e(t,r){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.setItem(this.storageName(t),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"has",value:function(){var e=u(n.default.mark(function e(t){var r;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.keys();case 2:return r=e.sent,e.abrupt("return",r.indexOf(this.storageName(t))>-1);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){var e=u(n.default.mark(function e(t){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.removeItem(this.storageName(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"clearAll",value:function(){var e=u(n.default.mark(function e(){var t,r=this;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.keys();case 2:return t=e.sent,e.next=5,Promise.all(t.map(function(){var e=u(n.default.mark(function e(t){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.clear(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}()));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"storageName",value:function(e){return this.getPrefix()+"_"+e}},{key:"getPrefix",value:function(){return this.config.get("prefix")}},{key:"getDriver",value:function(){var e=this.config.get("defaultStorage"),t=this.config.get("storage").toLowerCase()||e;return this.drivers.indexOf(t)>-1?i.default[t.toUpperCase()]:i.default[e.toUpperCase()]}}]),e}();r.default=c},{"babel-runtime/regenerator":1,localforage:7}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.storage=localStorage,this.config=t}return n(e,[{key:"get",value:function(e){try{var t=this.storageName(e);return this.has(t)?JSON.parse(this.storage.getItem(t)):[]}catch(e){return[]}}},{key:"set",value:function(e,t){this.storage.setItem(this.storageName(e),t)}},{key:"has",value:function(e){return e in this.storage}},{key:"clear",value:function(e){this.storage.removeItem(this.storageName(e))}},{key:"clearAll",value:function(){this.storage.clear()}},{key:"storageName",value:function(e){return this.getPrefix()+"_"+e}},{key:"getPrefix",value:function(){return this.config.get("prefix")}}]),e}();r.default=o},{}],25:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.clone=function(e){var t=Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyNames(e).reduce(function(t,r){return t[r]=Object.getOwnPropertyDescriptor(e,r),t},{}));Object.isExtensible(e)||Object.preventExtensions(t);Object.isSealed(e)&&Object.seal(t);Object.isFrozen(e)&&Object.freeze(t);return t},r.hasProperty=u,r.hasMethod=function(e,t){return e instanceof Object&&t in e},r.isFunction=function(e){return e instanceof Function},r.excludeSpecificTasks=c,r.utilClearByTag=function(e){if(!c.call(["locked"],e))return!1;return e.tag===this},r.fifo=function(e,t){return e.createdAt-t.createdAt},r.lifo=function(e,t){return t.createdAt-e.createdAt},r.log=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!0!==this)return void localStorage.removeItem("debug");localStorage.setItem("debug","worker:*");(0,o.default)("worker:"+t+" ->")(n.default.get(i.default,e))};var n=a(e("object-path")),o=a(e("debug")),i=a(e("./enum/log.events"));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e){var t=Array.isArray(this)?this:["freezed","locked"],r=[],n=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){var s=a.value;r.push(!1===u(e,s)||!1===e[s])}}catch(e){o=!0,i=e}finally{try{!n&&c.return&&c.return()}finally{if(o)throw i}}return!(r.indexOf(!1)>-1)}},{"./enum/log.events":17,debug:3,"object-path":9}]},{},[20]);