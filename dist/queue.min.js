!function i(a,u,c){function s(t,e){if(!u[t]){if(!a[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(f)return f(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var o=u[t]={exports:{}};a[t][0].call(o.exports,function(e){return s(a[t][1][e]||e)},o,o.exports,i,a,u,c)}return u[t].exports}for(var f="function"==typeof require&&require,e=0;e<c.length;e++)s(c[e]);return s}({1:[function(e,t,r){t.exports=e("regenerator-runtime")},{"regenerator-runtime":11}],2:[function(e,t,r){var n,o,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function c(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{o="function"==typeof clearTimeout?clearTimeout:u}catch(e){o=u}}();var s,f=[],l=!1,d=-1;function h(){l&&s&&(l=!1,s.length?f=s.concat(f):d=-1,f.length&&p())}function p(){if(!l){var e=c(h);l=!0;for(var t=f.length;t;){for(s=f,f=[];++d<t;)s&&s[d].run();d=-1,t=f.length}s=null,l=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===u||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function y(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];f.push(new v(e,t)),1!==f.length||l||c(p)},v.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],3:[function(e,t,r){var a=/\b(Array|Date|Object|Math|JSON)\b/g;t.exports=function(e,t){var r,n,o,i=function(e){for(var t=[],r=0;r<e.length;r++)~t.indexOf(e[r])||t.push(e[r]);return t}(e.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\//g,"").replace(a,"").match(/[a-zA-Z_]\w*/g)||[]);return t&&"string"==typeof t&&(r=t,t=function(e){return r+e}),t?(n=i,o=t,e.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\/|[a-zA-Z_]\w*/g,function(e){return"("==e[e.length-1]?o(e):~n.indexOf(e)?o(e):e})):i}},{}],4:[function(r,n,i){(function(t){function e(){var e;try{e=i.storage.debug}catch(e){}return!e&&void 0!==t&&"env"in t&&(e=t.env.DEBUG),e}(i=n.exports=r("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},i.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+i.humanize(this.diff),!t)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var n=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(o=n))}),e.splice(o,0,r)},i.save=function(e){try{null==e?i.storage.removeItem("debug"):i.storage.debug=e}catch(e){}},i.load=e,i.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},i.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),i.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],i.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},i.enable(e())}).call(this,r("_process"))},{"./debug":5,_process:2}],5:[function(e,t,c){function r(e){var n;function u(){if(u.enabled){var o=u,e=+new Date,t=e-(n||e);o.diff=t,o.prev=n,o.curr=e,n=e;for(var i=new Array(arguments.length),r=0;r<i.length;r++)i[r]=arguments[r];i[0]=c.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var a=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;a++;var r=c.formatters[t];if("function"==typeof r){var n=i[a];e=r.call(o,n),i.splice(a,1),a--}return e}),c.formatArgs.call(o,i),(u.log||c.log||console.log.bind(console)).apply(o,i)}}return u.namespace=e,u.enabled=c.enabled(e),u.useColors=c.useColors(),u.color=function(e){var t,r=0;for(t in e)r=(r<<5)-r+e.charCodeAt(t),r|=0;return c.colors[Math.abs(r)%c.colors.length]}(e),u.destroy=o,"function"==typeof c.init&&c.init(u),c.instances.push(u),u}function o(){var e=c.instances.indexOf(this);return-1!==e&&(c.instances.splice(e,1),!0)}(c=t.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},c.disable=function(){c.enable("")},c.enable=function(e){var t;c.save(e),c.names=[],c.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length;for(t=0;t<n;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?c.skips.push(new RegExp("^"+e.substr(1)+"$")):c.names.push(new RegExp("^"+e+"$")));for(t=0;t<c.instances.length;t++){var o=c.instances[t];o.enabled=c.enabled(o.namespace)}},c.enabled=function(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=c.skips.length;t<r;t++)if(c.skips[t].test(e))return!1;for(t=0,r=c.names.length;t<r;t++)if(c.names[t].test(e))return!0;return!1},c.humanize=e("ms"),c.instances=[],c.names=[],c.skips=[],c.formatters={}},{ms:9}],6:[function(e,t,r){var i=e("to-function");t.exports=function(e,t){var r,n={};t=i(t);for(var o=0;o<e.length;++o)n[r=t(e[o],o)]=n[r]||[],n[r].push(e[o]);return n}},{"to-function":13}],7:[function(e,t,r){"use strict";function n(){return Promise.resolve(!navigator.onLine)}Object.defineProperty(r,"__esModule",{value:!0}),r.check=n,r.watch=function(t){var r=function(e,t,r){var n=window[(r?"add":"remove")+"EventListener"];e.split(" ").forEach(function(e){n(e,t)})}.bind(null,"online offline",function(e){return n().then(t)});return r(!0),function(e){r(!1)}}},{}],8:[function(l,t,r){(function(n){!function(e){if("object"==typeof r&&void 0!==t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:this).localforage=e()}}(function(){return function i(a,u,c){function s(r,e){if(!u[r]){if(!a[r]){var t="function"==typeof l&&l;if(!e&&t)return t(r,!0);if(f)return f(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var o=u[r]={exports:{}};a[r][0].call(o.exports,function(e){var t=a[r][1][e];return s(t||e)},o,o.exports,i,a,u,c)}return u[r].exports}for(var f="function"==typeof l&&l,e=0;e<c.length;e++)s(c[e]);return s}({1:[function(e,f,t){(function(t){"use strict";var r,n,e=t.MutationObserver||t.WebKitMutationObserver;if(e){var o=0,i=new e(s),a=t.document.createTextNode("");i.observe(a,{characterData:!0}),r=function(){a.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){s(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(s,0)};else{var u=new t.MessageChannel;u.port1.onmessage=s,r=function(){u.port2.postMessage(0)}}var c=[];function s(){var e,t;n=!0;for(var r=c.length;r;){for(t=c,c=[],e=-1;++e<r;)t[e]();r=c.length}n=!1}f.exports=function(e){1!==c.push(e)||n||r()}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,r){"use strict";var o=e(1);function s(){}var f={},i=["REJECTED"],a=["FULFILLED"],n=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=n,this.queue=[],this.outcome=void 0,e!==s&&h(this,e)}function c(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function l(t,r,n){o(function(){var e;try{e=r(n)}catch(e){return f.reject(t,e)}e===t?f.reject(t,new TypeError("Cannot resolve promise with itself")):f.resolve(t,e)})}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(t,e){var r=!1;function n(e){r||(r=!0,f.reject(t,e))}function o(e){r||(r=!0,f.resolve(t,e))}var i=p(function(){e(o,n)});"error"===i.status&&n(i.value)}function p(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}(t.exports=u).prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===i)return this;var r=new this.constructor(s);this.state!==n?l(r,this.state===a?e:t,this.outcome):this.queue.push(new c(r,e,t));return r},c.prototype.callFulfilled=function(e){f.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){l(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){f.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){l(this.promise,this.onRejected,e)},f.resolve=function(e,t){var r=p(d,t);if("error"===r.status)return f.reject(e,r.value);var n=r.value;if(n)h(e,n);else{e.state=a,e.outcome=t;for(var o=-1,i=e.queue.length;++o<i;)e.queue[o].callFulfilled(t)}return e},f.reject=function(e,t){e.state=i,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},u.resolve=function(e){if(e instanceof this)return e;return f.resolve(new this(s),e)},u.reject=function(e){var t=new this(s);return f.reject(t,e)},u.all=function(e){var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,o=!1;if(!n)return this.resolve([]);var i=new Array(n),a=0,t=-1,u=new this(s);for(;++t<n;)c(e[t],t);return u;function c(e,t){r.resolve(e).then(function(e){i[t]=e,++a!==n||o||(o=!0,f.resolve(u,i))},function(e){o||(o=!0,f.reject(u,e))})}},u.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);var o=-1,i=new this(s);for(;++o<r;)a=e[o],t.resolve(a).then(function(e){n||(n=!0,f.resolve(i,e))},function(e){n||(n=!0,f.reject(i,e))});var a;return i}},{1:1}],3:[function(t,e,r){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var u=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function a(t,r){t=t||[],r=r||{};try{return new Blob(t,r)}catch(e){if("TypeError"!==e.name)throw e;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),o=0;o<t.length;o+=1)n.append(t[o]);return n.getBlob(r.type)}}"undefined"==typeof Promise&&e(3);var l=Promise;function d(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function c(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function h(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function i(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var s="local-forage-detect-blob-support",o=void 0,f={},p=Object.prototype.toString,v="readonly",y="readwrite";function g(e){return"boolean"==typeof o?l.resolve(o):(n=e,new l(function(r){var e=n.transaction(s,y),t=a([""]);e.objectStore(s).put(t,"key"),e.onabort=function(e){e.preventDefault(),e.stopPropagation(),r(!1)},e.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),t=navigator.userAgent.match(/Edge\//);r(t||!e||43<=parseInt(e[1],10))}}).catch(function(){return!1})).then(function(e){return o=e});var n}function m(e){var t=f[e.name],r={};r.promise=new l(function(e,t){r.resolve=e,r.reject=t}),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then(function(){return r.promise}):t.dbReady=r.promise}function b(e){var t=f[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function w(e,t){var r=f[e.name].deferredOperations.pop();if(r)return r.reject(t),r.promise}function _(o,i){return new l(function(e,t){if(f[o.name]=f[o.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},o.db){if(!i)return e(o.db);m(o),o.db.close()}var r=[o.name];i&&r.push(o.version);var n=u.open.apply(u,r);i&&(n.onupgradeneeded=function(t){var e=n.result;try{e.createObjectStore(o.storeName),t.oldVersion<=1&&e.createObjectStore(s)}catch(e){if("ConstraintError"!==e.name)throw e;console.warn('The database "'+o.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+o.storeName+'" already exists.')}}),n.onerror=function(e){e.preventDefault(),t(n.error)},n.onsuccess=function(){e(n.result),b(o)}})}function x(e){return _(e,!1)}function k(e){return _(e,!0)}function C(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,o=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||r){if(r){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function S(e){return a([function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=0;o<t;o++)n[o]=e.charCodeAt(o);return r}(atob(e.data))],{type:e.type})}function E(e){return e&&e.__local_forage_encoded_blob}function j(e){var t=this,r=t._initReady().then(function(){var e=f[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return c(r,e,e),r}function I(t,r,n,o){void 0===o&&(o=1);try{var e=t.db.transaction(t.storeName,r);n(null,e)}catch(e){if(0<o&&(!t.db||"InvalidStateError"===e.name||"NotFoundError"===e.name))return l.resolve().then(function(){if(!t.db||"NotFoundError"===e.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),k(t)}).then(function(){return function(r){m(r);for(var n=f[r.name],o=n.forages,e=0;e<o.length;e++){var t=o[e];t._dbInfo.db&&(t._dbInfo.db.close(),t._dbInfo.db=null)}return r.db=null,x(r).then(function(e){return r.db=e,C(r)?k(r):e}).then(function(e){r.db=n.db=e;for(var t=0;t<o.length;t++)o[t]._dbInfo.db=e}).catch(function(e){throw w(r,e),e})}(t).then(function(){I(t,r,n,o-1)})}).catch(n);n(e)}}var O={_driver:"asyncStorage",_initStorage:function(e){var n=this,o={db:null};if(e)for(var t in e)o[t]=e[t];var i=f[o.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},f[o.name]=i),i.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=j);var r=[];function a(){return l.resolve()}for(var u=0;u<i.forages.length;u++){var c=i.forages[u];c!==n&&r.push(c._initReady().catch(a))}var s=i.forages.slice(0);return l.all(r).then(function(){return o.db=i.db,x(o)}).then(function(e){return o.db=e,C(o,n._defaultConfig.version)?k(o):e}).then(function(e){o.db=i.db=e,n._dbInfo=o;for(var t=0;t<s.length;t++){var r=s[t];r!==n&&(r._dbInfo.db=o.db,r._dbInfo.version=o.version)}})},_support:function(){try{if(!u)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(a,e){var u=this,t=new l(function(i,r){u.ready().then(function(){I(u._dbInfo,v,function(e,t){if(e)return r(e);try{var n=t.objectStore(u._dbInfo.storeName).openCursor(),o=1;n.onsuccess=function(){var e=n.result;if(e){var t=e.value;E(t)&&(t=S(t));var r=a(t,e.key,o++);void 0!==r?i(r):e.continue()}else i()},n.onerror=function(){r(n.error)}}catch(e){r(e)}})}).catch(r)});return d(t,e),t},getItem:function(i,e){var a=this;i=h(i);var t=new l(function(n,o){a.ready().then(function(){I(a._dbInfo,v,function(e,t){if(e)return o(e);try{var r=t.objectStore(a._dbInfo.storeName).get(i);r.onsuccess=function(){var e=r.result;void 0===e&&(e=null),E(e)&&(e=S(e)),n(e)},r.onerror=function(){o(r.error)}}catch(e){o(e)}})}).catch(o)});return d(t,e),t},setItem:function(u,t,e){var c=this;u=h(u);var r=new l(function(i,a){var e;c.ready().then(function(){return e=c._dbInfo,"[object Blob]"===p.call(t)?g(e.db).then(function(e){return e?t:(n=t,new l(function(r,e){var t=new FileReader;t.onerror=e,t.onloadend=function(e){var t=btoa(e.target.result||"");r({__local_forage_encoded_blob:!0,data:t,type:n.type})},t.readAsBinaryString(n)}));var n}):t}).then(function(o){I(c._dbInfo,y,function(e,t){if(e)return a(e);try{var r=t.objectStore(c._dbInfo.storeName);null===o&&(o=void 0);var n=r.put(o,u);t.oncomplete=function(){void 0===o&&(o=null),i(o)},t.onabort=t.onerror=function(){var e=n.error?n.error:n.transaction.error;a(e)}}catch(e){a(e)}})}).catch(a)});return d(r,e),r},removeItem:function(i,e){var a=this;i=h(i);var t=new l(function(n,o){a.ready().then(function(){I(a._dbInfo,y,function(e,t){if(e)return o(e);try{var r=t.objectStore(a._dbInfo.storeName).delete(i);t.oncomplete=function(){n()},t.onerror=function(){o(r.error)},t.onabort=function(){var e=r.error?r.error:r.transaction.error;o(e)}}catch(e){o(e)}})}).catch(o)});return d(t,e),t},clear:function(e){var i=this,t=new l(function(n,o){i.ready().then(function(){I(i._dbInfo,y,function(e,t){if(e)return o(e);try{var r=t.objectStore(i._dbInfo.storeName).clear();t.oncomplete=function(){n()},t.onabort=t.onerror=function(){var e=r.error?r.error:r.transaction.error;o(e)}}catch(e){o(e)}})}).catch(o)});return d(t,e),t},length:function(e){var i=this,t=new l(function(n,o){i.ready().then(function(){I(i._dbInfo,v,function(e,t){if(e)return o(e);try{var r=t.objectStore(i._dbInfo.storeName).count();r.onsuccess=function(){n(r.result)},r.onerror=function(){o(r.error)}}catch(e){o(e)}})}).catch(o)});return d(t,e),t},key:function(u,e){var c=this,t=new l(function(i,a){u<0?i(null):c.ready().then(function(){I(c._dbInfo,v,function(e,t){if(e)return a(e);try{var r=t.objectStore(c._dbInfo.storeName),n=!1,o=r.openCursor();o.onsuccess=function(){var e=o.result;e?0===u?i(e.key):n?i(e.key):(n=!0,e.advance(u)):i(null)},o.onerror=function(){a(o.error)}}catch(e){a(e)}})}).catch(a)});return d(t,e),t},keys:function(e){var a=this,t=new l(function(o,i){a.ready().then(function(){I(a._dbInfo,v,function(e,t){if(e)return i(e);try{var r=t.objectStore(a._dbInfo.storeName).openCursor(),n=[];r.onsuccess=function(){var e=r.result;e?(n.push(e.key),e.continue()):o(n)},r.onerror=function(){i(r.error)}}catch(e){i(e)}})}).catch(i)});return d(t,e),t},dropInstance:function(a,e){e=i.apply(this,arguments);var t,r=this.config();if((a="function"!=typeof a&&a||{}).name||(a.name=a.name||r.name,a.storeName=a.storeName||r.storeName),a.name){var n=a.name===r.name&&this._dbInfo.db?l.resolve(this._dbInfo.db):x(a).then(function(e){var t=f[a.name],r=t.forages;t.db=e;for(var n=0;n<r.length;n++)r[n]._dbInfo.db=e;return e});t=a.storeName?n.then(function(e){if(e.objectStoreNames.contains(a.storeName)){var o=e.version+1;m(a);var n=f[a.name],i=n.forages;e.close();for(var t=0;t<i.length;t++){var r=i[t];r._dbInfo.db=null,r._dbInfo.version=o}return new l(function(t,r){var n=u.open(a.name,o);n.onerror=function(e){n.result.close(),r(e)},n.onupgradeneeded=function(){n.result.deleteObjectStore(a.storeName)},n.onsuccess=function(){var e=n.result;e.close(),t(e)}}).then(function(e){n.db=e;for(var t=0;t<i.length;t++){var r=i[t];r._dbInfo.db=e,b(r._dbInfo)}}).catch(function(e){throw(w(a,e)||l.resolve()).catch(function(){}),e})}}):n.then(function(e){m(a);var r=f[a.name],n=r.forages;e.close();for(var t=0;t<n.length;t++)n[t]._dbInfo.db=null;return new l(function(t,r){var n=u.deleteDatabase(a.name);n.onerror=n.onblocked=function(e){var t=n.result;t&&t.close(),r(e)},n.onsuccess=function(){var e=n.result;e&&e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<n.length;t++)b(n[t]._dbInfo)}).catch(function(e){throw(w(a,e)||l.resolve()).catch(function(){}),e})})}else t=l.reject("Invalid arguments");return d(t,e),t}};var F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N="~~local_forage_type~",T=/^~~local_forage_type~([^~]+)~/,A="__lfsc__:",P=A.length,R="arbf",L="blob",D="si08",M="ui08",B="uic8",z="si16",q="si32",U="ur16",W="ui32",J="fl32",Q="fl64",G=P+R.length,H=Object.prototype.toString;function $(e){var t,r,n,o,i,a=.75*e.length,u=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var s=new ArrayBuffer(a),f=new Uint8Array(s);for(t=0;t<u;t+=4)r=F.indexOf(e[t]),n=F.indexOf(e[t+1]),o=F.indexOf(e[t+2]),i=F.indexOf(e[t+3]),f[c++]=r<<2|n>>4,f[c++]=(15&n)<<4|o>>2,f[c++]=(3&o)<<6|63&i;return s}function V(e){var t,r=new Uint8Array(e),n="";for(t=0;t<r.length;t+=3)n+=F[r[t]>>2],n+=F[(3&r[t])<<4|r[t+1]>>4],n+=F[(15&r[t+1])<<2|r[t+2]>>6],n+=F[63&r[t+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}var K={serialize:function(t,r){var e="";if(t&&(e=H.call(t)),t&&("[object ArrayBuffer]"===e||t.buffer&&"[object ArrayBuffer]"===H.call(t.buffer))){var n,o=A;t instanceof ArrayBuffer?(n=t,o+=R):(n=t.buffer,"[object Int8Array]"===e?o+=D:"[object Uint8Array]"===e?o+=M:"[object Uint8ClampedArray]"===e?o+=B:"[object Int16Array]"===e?o+=z:"[object Uint16Array]"===e?o+=U:"[object Int32Array]"===e?o+=q:"[object Uint32Array]"===e?o+=W:"[object Float32Array]"===e?o+=J:"[object Float64Array]"===e?o+=Q:r(new Error("Failed to get type for BinaryArray"))),r(o+V(n))}else if("[object Blob]"===e){var i=new FileReader;i.onload=function(){var e=N+t.type+"~"+V(this.result);r(A+L+e)},i.readAsArrayBuffer(t)}else try{r(JSON.stringify(t))}catch(e){console.error("Couldn't convert value into a JSON string: ",t),r(null,e)}},deserialize:function(e){if(e.substring(0,P)!==A)return JSON.parse(e);var t,r=e.substring(G),n=e.substring(P,G);if(n===L&&T.test(r)){var o=r.match(T);t=o[1],r=r.substring(o[0].length)}var i=$(r);switch(n){case R:return i;case L:return a([i],{type:t});case D:return new Int8Array(i);case M:return new Uint8Array(i);case B:return new Uint8ClampedArray(i);case z:return new Int16Array(i);case U:return new Uint16Array(i);case q:return new Int32Array(i);case W:return new Uint32Array(i);case J:return new Float32Array(i);case Q:return new Float64Array(i);default:throw new Error("Unkown type: "+n)}},stringToBuffer:$,bufferToString:V};function X(e,t,r,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function Y(e,n,o,i,a,u){e.executeSql(o,i,a,function(e,r){r.code===r.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[name],function(e,t){t.rows.length?u(e,r):X(e,n,function(){e.executeSql(o,i,a,u)},u)},u):u(e,r)},u)}var Z={_driver:"webSQLStorage",_initStorage:function(e){var n=this,o={db:null};if(e)for(var t in e)o[t]="string"!=typeof e[t]?e[t].toString():e[t];var r=new l(function(t,r){try{o.db=openDatabase(o.name,String(o.version),o.description,o.size)}catch(e){return r(e)}o.db.transaction(function(e){X(e,o,function(){n._dbInfo=o,t()},function(e,t){r(t)})},r)});return o.serializer=K,r},_support:"function"==typeof openDatabase,iterate:function(s,e){var t=this,r=new l(function(c,r){t.ready().then(function(){var u=t._dbInfo;u.db.transaction(function(e){Y(e,u,"SELECT * FROM "+u.storeName,[],function(e,t){for(var r=t.rows,n=r.length,o=0;o<n;o++){var i=r.item(o),a=i.value;if(a&&(a=u.serializer.deserialize(a)),void 0!==(a=s(a,i.key,o+1)))return void c(a)}c()},function(e,t){r(t)})})}).catch(r)});return d(r,e),r},getItem:function(t,e){var i=this;t=h(t);var r=new l(function(o,r){i.ready().then(function(){var n=i._dbInfo;n.db.transaction(function(e){Y(e,n,"SELECT * FROM "+n.storeName+" WHERE key = ? LIMIT 1",[t],function(e,t){var r=t.rows.length?t.rows.item(0).value:null;r&&(r=n.serializer.deserialize(r)),o(r)},function(e,t){r(t)})})}).catch(r)});return d(r,e),r},setItem:function(e,t,r){return function a(u,e,c,s){var f=this;u=h(u);var t=new l(function(o,i){f.ready().then(function(){void 0===e&&(e=null);var r=e,n=f._dbInfo;n.serializer.serialize(e,function(t,e){e?i(e):n.db.transaction(function(e){Y(e,n,"INSERT OR REPLACE INTO "+n.storeName+" (key, value) VALUES (?, ?)",[u,t],function(){o(r)},function(e,t){i(t)})},function(e){if(e.code===e.QUOTA_ERR){if(0<s)return void o(a.apply(f,[u,r,c,s-1]));i(e)}})})}).catch(i)});return d(t,c),t}.apply(this,[e,t,r,1])},removeItem:function(o,e){var i=this;o=h(o);var t=new l(function(r,n){i.ready().then(function(){var t=i._dbInfo;t.db.transaction(function(e){Y(e,t,"DELETE FROM "+t.storeName+" WHERE key = ?",[o],function(){r()},function(e,t){n(t)})})}).catch(n)});return d(t,e),t},clear:function(e){var o=this,t=new l(function(r,n){o.ready().then(function(){var t=o._dbInfo;t.db.transaction(function(e){Y(e,t,"DELETE FROM "+t.storeName,[],function(){r()},function(e,t){n(t)})})}).catch(n)});return d(t,e),t},length:function(e){var o=this,t=new l(function(n,r){o.ready().then(function(){var t=o._dbInfo;t.db.transaction(function(e){Y(e,t,"SELECT COUNT(key) as c FROM "+t.storeName,[],function(e,t){var r=t.rows.item(0).c;n(r)},function(e,t){r(t)})})}).catch(r)});return d(t,e),t},key:function(o,e){var i=this,t=new l(function(n,r){i.ready().then(function(){var t=i._dbInfo;t.db.transaction(function(e){Y(e,t,"SELECT key FROM "+t.storeName+" WHERE id = ? LIMIT 1",[o+1],function(e,t){var r=t.rows.length?t.rows.item(0).key:null;n(r)},function(e,t){r(t)})})}).catch(r)});return d(t,e),t},keys:function(e){var n=this,t=new l(function(o,r){n.ready().then(function(){var t=n._dbInfo;t.db.transaction(function(e){Y(e,t,"SELECT key FROM "+t.storeName,[],function(e,t){for(var r=[],n=0;n<t.rows.length;n++)r.push(t.rows.item(n).key);o(r)},function(e,t){r(t)})})}).catch(r)});return d(t,e),t},dropInstance:function(r,e){e=i.apply(this,arguments);var n=this.config();(r="function"!=typeof r&&r||{}).name||(r.name=r.name||n.name,r.storeName=r.storeName||n.storeName);var t,o=this;return d(t=r.name?new l(function(e){var t,i;t=r.name===n.name?o._dbInfo.db:openDatabase(r.name,"","",0),r.storeName?e({db:t,storeNames:[r.storeName]}):e((i=t,new l(function(o,r){i.transaction(function(e){e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(e,t){for(var r=[],n=0;n<t.rows.length;n++)r.push(t.rows.item(n).name);o({db:i,storeNames:r})},function(e,t){r(t)})},function(e){r(e)})})))}).then(function(u){return new l(function(i,a){u.db.transaction(function(n){function e(t){return new l(function(e,r){n.executeSql("DROP TABLE IF EXISTS "+t,[],function(){e()},function(e,t){r(t)})})}for(var t=[],r=0,o=u.storeNames.length;r<o;r++)t.push(e(u.storeNames[r]));l.all(t).then(function(){i()}).catch(function(e){a(e)})},function(e){a(e)})})}):l.reject("Invalid arguments"),e),t}};function ee(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}function te(){return!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}()||0<localStorage.length}var re={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var r in e)t[r]=e[r];return t.keyPrefix=ee(e,this._defaultConfig),te()?((this._dbInfo=t).serializer=K,l.resolve()):l.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(c,e){var s=this,t=s.ready().then(function(){for(var e=s._dbInfo,t=e.keyPrefix,r=t.length,n=localStorage.length,o=1,i=0;i<n;i++){var a=localStorage.key(i);if(0===a.indexOf(t)){var u=localStorage.getItem(a);if(u&&(u=e.serializer.deserialize(u)),void 0!==(u=c(u,a.substring(r),o++)))return u}}});return d(t,e),t},getItem:function(r,e){var n=this;r=h(r);var t=n.ready().then(function(){var e=n._dbInfo,t=localStorage.getItem(e.keyPrefix+r);return t&&(t=e.serializer.deserialize(t)),t});return d(t,e),t},setItem:function(a,e,t){var u=this;a=h(a);var r=u.ready().then(function(){void 0===e&&(e=null);var i=e;return new l(function(r,n){var o=u._dbInfo;o.serializer.serialize(e,function(e,t){if(t)n(t);else try{localStorage.setItem(o.keyPrefix+a,e),r(i)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||n(e),n(e)}})})});return d(r,t),r},removeItem:function(t,e){var r=this;t=h(t);var n=r.ready().then(function(){var e=r._dbInfo;localStorage.removeItem(e.keyPrefix+t)});return d(n,e),n},clear:function(e){var n=this,t=n.ready().then(function(){for(var e=n._dbInfo.keyPrefix,t=localStorage.length-1;0<=t;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}});return d(t,e),t},length:function(e){var t=this.keys().then(function(e){return e.length});return d(t,e),t},key:function(r,e){var n=this,t=n.ready().then(function(){var t,e=n._dbInfo;try{t=localStorage.key(r)}catch(e){t=null}return t&&(t=t.substring(e.keyPrefix.length)),t});return d(t,e),t},keys:function(e){var i=this,t=i.ready().then(function(){for(var e=i._dbInfo,t=localStorage.length,r=[],n=0;n<t;n++){var o=localStorage.key(n);0===o.indexOf(e.keyPrefix)&&r.push(o.substring(e.keyPrefix.length))}return r});return d(t,e),t},dropInstance:function(t,e){if(e=i.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var r=this.config();t.name=t.name||r.name,t.storeName=t.storeName||r.storeName}var n,o=this;return d(n=t.name?new l(function(e){t.storeName?e(ee(t,o._defaultConfig)):e(t.name+"/")}).then(function(e){for(var t=localStorage.length-1;0<=t;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}}):l.reject("Invalid arguments"),e),n}},ne=function(e,t){for(var r,n,o=e.length,i=0;i<o;){if((r=e[i])===(n=t)||"number"==typeof r&&"number"==typeof n&&isNaN(r)&&isNaN(n))return!0;i++}return!1},oe=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},ie={},ae={},ue={INDEXEDDB:O,WEBSQL:Z,LOCALSTORAGE:re},ce=[ue.INDEXEDDB._driver,ue.WEBSQL._driver,ue.LOCALSTORAGE._driver],se=["dropInstance"],fe=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(se),le={description:"",driver:ce.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function de(t,r){t[r]=function(){var e=arguments;return t.ready().then(function(){return t[r].apply(t,e)})}}function he(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&(oe(t[r])?arguments[0][r]=t[r].slice():arguments[0][r]=t[r])}return arguments[0]}var pe=new(function(){function o(e){for(var t in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),ue)if(ue.hasOwnProperty(t)){var r=ue[t],n=r._driver;this[t]=n,ie[n]||this.defineDriver(r)}this._defaultConfig=he({},le),this._config=he({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return o.prototype.config=function(e){if("object"===(void 0===e?"undefined":n(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},o.prototype.defineDriver=function(s,e,t){var r=new l(function(t,r){try{var n=s._driver,e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!s._driver)return void r(e);for(var o=fe.concat("_initStorage"),i=0,a=o.length;i<a;i++){var u=o[i];if((!ne(se,u)||s[u])&&"function"!=typeof s[u])return void r(e)}!function(){for(var e=function(r){return function(){var e=new Error("Method "+r+" is not implemented by the current driver"),t=l.reject(e);return d(t,arguments[arguments.length-1]),t}},t=0,r=se.length;t<r;t++){var n=se[t];s[n]||(s[n]=e(n))}}();var c=function(e){ie[n]&&console.info("Redefining LocalForage driver: "+n),ie[n]=s,ae[n]=e,t()};"_support"in s?s._support&&"function"==typeof s._support?s._support().then(c,r):c(!!s._support):c(!0)}catch(e){r(e)}});return c(r,e,t),r},o.prototype.driver=function(){return this._driver||null},o.prototype.getDriver=function(e,t,r){var n=ie[e]?l.resolve(ie[e]):l.reject(new Error("Driver not found."));return c(n,t,r),n},o.prototype.getSerializer=function(e){var t=l.resolve(K);return c(t,e),t},o.prototype.ready=function(e){var t=this,r=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return c(r,e,e),r},o.prototype.setDriver=function(e,t,r){var i=this;oe(e)||(e=[e]);var n=this._getSupportedDrivers(e);function a(){i._config.driver=i.driver()}function u(e){return i._extend(e),a(),i._ready=i._initStorage(i._config),i._ready}var o=null!==this._driverSet?this._driverSet.catch(function(){return l.resolve()}):l.resolve();return this._driverSet=o.then(function(){var e=n[0];return i._dbInfo=null,i._ready=null,i.getDriver(e).then(function(e){var o;i._driver=e._driver,a(),i._wrapLibraryMethodsWithReady(),i._initDriver=(o=n,function(){var n=0;return function e(){for(;n<o.length;){var t=o[n];return n++,i._dbInfo=null,i._ready=null,i.getDriver(t).then(u).catch(e)}a();var r=new Error("No available storage method found.");return i._driverSet=l.reject(r),i._driverSet}()})})}).catch(function(){a();var e=new Error("No available storage method found.");return i._driverSet=l.reject(e),i._driverSet}),c(this._driverSet,t,r),this._driverSet},o.prototype.supports=function(e){return!!ae[e]},o.prototype._extend=function(e){he(this,e)},o.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var o=e[r];this.supports(o)&&t.push(o)}return t},o.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=fe.length;e<t;e++)de(this,fe[e])},o.prototype.createInstance=function(e){return new o(e)},o}());t.exports=pe},{3:3}]},{},[4])(4)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(e,t,r){var o=1e3,i=60*o,a=60*i,u=24*a,c=365.25*u;function s(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}t.exports=function(e,t){t=t||{};var r,n=typeof e;if("string"===n&&0<e.length)return function(e){if(100<(e=String(e)).length)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*c;case"days":case"day":case"d":return r*u;case"hours":case"hour":case"hrs":case"hr":case"h":return r*a;case"minutes":case"minute":case"mins":case"min":case"m":return r*i;case"seconds":case"second":case"secs":case"sec":case"s":return r*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===n&&!1===isNaN(e))return t.long?s(r=e,u,"day")||s(r,a,"hour")||s(r,i,"minute")||s(r,o,"second")||r+" ms":function(e){if(u<=e)return Math.round(e/u)+"d";if(a<=e)return Math.round(e/a)+"h";if(i<=e)return Math.round(e/i)+"m";if(o<=e)return Math.round(e/o)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],10:[function(e,r,t){!function(e,t){"use strict";"object"==typeof r&&"object"==typeof r.exports?r.exports=t():"function"==typeof define&&define.amd?define([],t):e.objectPath=t()}(this,function(){"use strict";var t=Object.prototype.toString;function i(e,t){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}function f(e){if(!e)return!0;if(d(e)&&0===e.length)return!0;if("string"!=typeof e){for(var t in e)if(i(e,t))return!1;return!0}return!1}function l(e){return t.call(e)}var d=Array.isArray||function(e){return"[object Array]"===t.call(e)};function h(e){var t=parseInt(e);return t.toString()===e?t:e}function e(o){o=o||{};var a=function(r){return Object.keys(a).reduce(function(e,t){return"create"===t||"function"==typeof a[t]&&(e[t]=a[t].bind(a,r)),e},{})};function u(e,t){return o.includeInheritedProps||"number"==typeof t&&Array.isArray(e)||i(e,t)}function c(e,t){if(u(e,t))return e[t]}function s(e,t,r,n){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if("string"==typeof t)return s(e,t.split(".").map(h),r,n);var o=t[0],i=c(e,o);return 1===t.length?(void 0!==i&&n||(e[o]=r),i):(void 0===i&&("number"==typeof t[1]?e[o]=[]:e[o]={}),s(e[o],t.slice(1),r,n))}return a.has=function(e,t){if("number"==typeof t?t=[t]:"string"==typeof t&&(t=t.split(".")),!t||0===t.length)return!!e;for(var r=0;r<t.length;r++){var n=h(t[r]);if(!("number"==typeof n&&d(e)&&n<e.length||(o.includeInheritedProps?n in Object(e):i(e,n))))return!1;e=e[n]}return!0},a.ensureExists=function(e,t,r){return s(e,t,r,!0)},a.set=function(e,t,r,n){return s(e,t,r,n)},a.insert=function(e,t,r,n){var o=a.get(e,t);n=~~n,d(o)||(o=[],a.set(e,t,o)),o.splice(n,0,r)},a.empty=function(e,t){var r,n;if(!f(t)&&(null!=e&&(r=a.get(e,t)))){if("string"==typeof r)return a.set(e,t,"");if("boolean"==typeof(i=r)||"[object Boolean]"===l(i))return a.set(e,t,!1);if("number"==typeof r)return a.set(e,t,0);if(d(r))r.length=0;else{if("object"!=typeof(o=r)||"[object Object]"!==l(o))return a.set(e,t,null);for(n in r)u(r,n)&&delete r[n]}var o,i}},a.push=function(e,t){var r=a.get(e,t);d(r)||(r=[],a.set(e,t,r)),r.push.apply(r,Array.prototype.slice.call(arguments,2))},a.coalesce=function(e,t,r){for(var n,o=0,i=t.length;o<i;o++)if(void 0!==(n=a.get(e,t[o])))return n;return r},a.get=function(e,t,r){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if(null==e)return r;if("string"==typeof t)return a.get(e,t.split("."),r);var n=h(t[0]),o=c(e,n);return void 0===o?r:1===t.length?o:a.get(e[n],t.slice(1),r)},a.del=function(e,t){if("number"==typeof t&&(t=[t]),null==e)return e;if(f(t))return e;if("string"==typeof t)return a.del(e,t.split("."));var r=h(t[0]);return u(e,r)?1!==t.length?a.del(e[r],t.slice(1)):(d(e)?e.splice(r,1):delete e[r],e):e},a}var r=e();return r.create=e,r.withInheritedProps=e({includeInheritedProps:!0}),r})},{}],11:[function(e,t,r){var n=function(){return this}()||Function("return this")(),o=n.regeneratorRuntime&&0<=Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime"),i=o&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=e("./runtime"),o)n.regeneratorRuntime=i;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}},{"./runtime":12}],12:[function(e,T,t){!function(e){"use strict";var c,t=Object.prototype,s=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",n=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag",a="object"==typeof T,u=e.regeneratorRuntime;if(u)a&&(T.exports=u);else{(u=e.regeneratorRuntime=a?T.exports:{}).wrap=b;var l="suspendedStart",d="suspendedYield",h="executing",p="completed",v={},f={};f[o]=function(){return this};var y=Object.getPrototypeOf,g=y&&y(y(F([])));g&&g!==t&&s.call(g,o)&&(f=g);var m=k.prototype=_.prototype=Object.create(f);x.prototype=m.constructor=k,k.constructor=x,k[i]=x.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,i in e||(e[i]="GeneratorFunction")),e.prototype=Object.create(m),e},u.awrap=function(e){return{__await:e}},C(S.prototype),S.prototype[n]=function(){return this},u.AsyncIterator=S,u.async=function(e,t,r,n){var o=new S(b(e,t,r,n));return u.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},C(m),m[i]="Generator",m[o]=function(){return this},m.toString=function(){return"[object Generator]"},u.keys=function(r){var n=[];for(var e in r)n.push(e);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},u.values=F,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&s.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=c)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return i.type="throw",i.arg=r,n.next=e,t&&(n.method="next",n.arg=c),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=s.call(o,"catchLoc"),u=s.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:F(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=c),v}}}function b(e,t,r,n){var i,a,u,c,o=t&&t.prototype instanceof _?t:_,s=Object.create(o.prototype),f=new O(n||[]);return s._invoke=(i=e,a=r,u=f,c=l,function(e,t){if(c===h)throw new Error("Generator is already running");if(c===p){if("throw"===e)throw t;return N()}for(u.method=e,u.arg=t;;){var r=u.delegate;if(r){var n=E(r,u);if(n){if(n===v)continue;return n}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(c===l)throw c=p,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);c=h;var o=w(i,a,u);if("normal"===o.type){if(c=u.done?p:d,o.arg===v)continue;return{value:o.arg,done:u.done}}"throw"===o.type&&(c=p,u.method="throw",u.arg=o.arg)}}),s}function w(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function _(){}function x(){}function k(){}function C(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function S(c){var t;this._invoke=function(r,n){function e(){return new Promise(function(e,t){!function t(e,r,n,o){var i=w(c[e],c,r);if("throw"!==i.type){var a=i.arg,u=a.value;return u&&"object"==typeof u&&s.call(u,"__await")?Promise.resolve(u.__await).then(function(e){t("next",e,n,o)},function(e){t("throw",e,n,o)}):Promise.resolve(u).then(function(e){a.value=e,n(a)},o)}o(i.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}}function E(e,t){var r=e.iterator[t.method];if(r===c){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=c,E(e,t),"throw"===t.method))return v;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var n=w(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,v;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=c),t.delegate=null,v):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function F(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(s.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=c,e.done=!0,e};return n.next=n}}return{next:N}}function N(){return{value:c,done:!0}}}(function(){return this}()||Function("return this")())},{}],13:[function(t,e,r){var i;try{i=t("props")}catch(e){i=t("component-props")}function n(e){switch({}.toString.call(e)){case"[object Object]":return function(e){var r={};for(var t in e)r[t]="string"==typeof e[t]?o(e[t]):n(e[t]);return function(e){if("object"!=typeof e)return!1;for(var t in r){if(!(t in e))return!1;if(!r[t](e[t]))return!1}return!0}}(e);case"[object Function]":return e;case"[object String]":return/^ *\W+/.test(r=e)?new Function("_","return _ "+r):new Function("_","return "+function(e){var t,r,n,o=i(e);if(!o.length)return"_."+e;for(r=0;r<o.length;r++)n=o[r],e=a(n,e,t="('function' == typeof "+(t="_."+n)+" ? "+t+"() : "+t+")");return e}(r));case"[object RegExp]":return t=e,function(e){return t.test(e)};default:return o(e)}var t,r}function o(t){return function(e){return t===e}}function a(e,t,r){return t.replace(new RegExp("(\\.)?"+e,"g"),function(e,t){return t?e:r})}e.exports=n},{"component-props":3,props:3}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={defaultStorage:"localstorage",prefix:"sq_jobs",timeout:1e3,limit:-1,principle:"fifo",network:!1,debug:!0}},{}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=e("./config.data"),a=(n=i)&&n.__esModule?n:{default:n};var u=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=a.default,this.merge(e)}return o(t,[{key:"set",value:function(e,t){this.config[e]=t}},{key:"get",value:function(e){return this.config[e]}},{key:"has",value:function(e){return Object.prototype.hasOwnProperty.call(this.config,e)}},{key:"merge",value:function(e){this.config=Object.assign({},this.config,e)}},{key:"remove",value:function(e){return delete this.config[e]}},{key:"all",value:function(){return this.config}}]),t}();r.default=u},{"./config.data":14}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._container={}}return n(e,[{key:"has",value:function(e){return Object.prototype.hasOwnProperty.call(this._container,e)}},{key:"get",value:function(e){return this._container[e]}},{key:"all",value:function(){return this._container}},{key:"bind",value:function(e,t){this._container[e]=t}},{key:"remove",value:function(e){return!!this.has(e)&&delete this._container[e]}},{key:"removeAll",value:function(){this._container={}}}]),e}();r.default=o},{}],17:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={queue:{created:"New task created.",next:"Next task processing.",starting:"Queue listener starting.",stopping:"Queue listener stopping.",stopped:"Queue listener stopped.",empty:"channel is empty...","not-found":"job not found",offline:"Disconnected",online:"Connected"},event:{created:"New event created",fired:"Event fired.","wildcard-fired":"Wildcard event fired."}}},{}],18:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store={},this.verifierPattern=/^[a-z0-9\-\_]+\:before$|after$|retry$|\*$/,this.wildcards=["*","error"],this.emptyFunc=function(){},this.store.before={},this.store.after={},this.store.retry={},this.store.wildcard={},this.store.error=this.emptyFunc,this.store["*"]=this.emptyFunc}return n(e,[{key:"on",value:function(e,t){if("function"!=typeof t)throw new Error("Event should be an function");this.isValid(e)&&this.add(e,t)}},{key:"emit",value:function(e,t){if(-1<this.wildcards.indexOf(e))this.wildcard.apply(this,[e].concat(Array.prototype.slice.call(arguments)));else{var r=this.getType(e),n=this.getName(e);if(this.store[r])(this.store[r][n]||this.emptyFunc).call(null,t)}this.wildcard("*",e,t)}},{key:"wildcard",value:function(e,t,r){this.store.wildcard[e]&&this.store.wildcard[e].call(null,t,r)}},{key:"add",value:function(e,t){if(-1<this.wildcards.indexOf(e))this.store.wildcard[e]=t;else{var r=this.getType(e),n=this.getName(e);this.store[r][n]=t}}},{key:"has",value:function(e){try{var t=e.split(":");return 1<t.length?!!this.store[t[1]][t[0]]:!!this.store.wildcard[t[0]]}catch(e){return!1}}},{key:"getName",value:function(e){return e.match(/(.*)\:.*/)[1]}},{key:"getType",value:function(e){return e.match(/^[a-z0-9\-\_]+\:(.*)/)[1]}},{key:"isValid",value:function(e){return this.verifierPattern.test(e)||-1<this.wildcards.indexOf(e)}}]),e}();r.default=o},{}],19:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.canMultiple=r.retryProcess=r.failedJobHandler=r.successJobHandler=r.lockTask=r.createTimeout=r.removeTask=r.saveTask=r.getTasksWithoutFreezed=void 0;var o,i,a,u,c,s,f,l,d,h=C(e("babel-runtime/regenerator")),p=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},v="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)},y=(r.getTasksWithoutFreezed=(o=E(h.default.mark(function e(){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.call(this).all();case 2:return e.t0=k.excludeSpecificTasks.bind(["freezed"]),e.abrupt("return",e.sent.filter(e.t0));case 4:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)}),r.saveTask=(i=E(h.default.mark(function e(t){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.call(this).save(F(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)}),r.removeTask=(a=E(h.default.mark(function e(t){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.call(this).delete(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})),g=(r.createTimeout=(u=E(h.default.mark(function e(){var t,r,n,o,i;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return clearTimeout(this.currentTimeout),e.next=3,j.call(this).fetch();case 3:if(void 0!==(t=e.sent.shift())){e.next=8;break}return I.call(this,"queue.empty",this.currentChannel),T.call(this),e.abrupt("return",1);case 8:if(this.container.has(t.handler)){e.next=15;break}return I.call(this,"queue.not-found",t.handler),e.next=12,b.call(this,t);case 12:return e.next=14,e.sent.call();case 14:return e.abrupt("return",1);case 15:return r=this.container.get(t.handler),n=new r.handler,o=n.timeout||this.config.get("timeout"),e.next=20,N.call(this,t,r,n);case 20:return e.t0=this,i=e.sent.bind(e.t0),e.abrupt("return",this.currentTimeout=setTimeout(i,o));case 23:case"end":return e.stop()}},e,this)})),function(){return u.apply(this,arguments)}),r.lockTask=(c=E(h.default.mark(function e(t){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.call(this).update(t._id,{locked:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})),m=r.successJobHandler=(s=E(h.default.mark(function e(r,n){var o;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=this,e.abrupt("return",function(){var t=E(h.default.mark(function e(t){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return P.call(o,t,r,n),A.call(o,"after",n,r.args),O.call(o,r,"after"),e.next=5,o.next();case 5:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e,this)})),function(e,t){return s.apply(this,arguments)}),b=r.failedJobHandler=(f=E(h.default.mark(function e(r,t){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var t=E(h.default.mark(function e(t){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.call(this,r._id),this.event.emit("error",r),e.next=4,this.next();case 4:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,this)})),function(e,t){return f.apply(this,arguments)}),w=r.retryProcess=(l=E(h.default.mark(function e(t,r){var n;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.call(this,t,"retry"),(n=L.call(this,t,r)).locked=!1,e.next=5,j.call(this).update(t._id,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)})),function(e,t){return l.apply(this,arguments)});r.canMultiple=(d=E(h.default.mark(function e(t){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("object"===(void 0===t?"undefined":v(t))&&!0===t.unique){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,this.hasByTag(t.tag);case 4:return e.t0=e.sent,e.abrupt("return",e.t0<1);case 6:case"end":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)});r.db=j,r.logProxy=I,r.dispatchEvents=O,r.checkPriority=F,r.loopHandler=N,r.stopQueue=T,r.fireJobInlineEvent=A,r.dispatchProcess=P,r.successProcess=R,r.statusOff=function(){this.running=!1},r.updateRetry=L,r.registerJobs=function(){if(x.default.isRegistered)return;var e=x.default.jobs||[],t=!0,r=!1,n=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,u=a.handler.toString(),c=u.match(/function\s([a-zA-Z_]+).*?/),s=p(c,2),f=(s[0],s[1]);f&&this.container.bind(f,a)}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}x.default.isRegistered=!0},r.checkNetwork=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:navigator.onLine,t=this.config.get("network");return!(!e&&t)},r.removeNetworkEvent=function(){"function"==typeof this.networkObserver&&this.networkObserver()},r.createNetworkEvent=function(e){e&&(this.networkObserver=(0,_.watch)(D.bind(this)))},r.queueCtrl=D;var _=e("is-offline"),x=C(e("./queue")),k=e("./utils");C(e("./storage-capsule"));function C(e){return e&&e.__esModule?e:{default:e}}function S(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function E(e){return function(){var u=e.apply(this,arguments);return new Promise(function(i,a){return function t(e,r){try{var n=u[e](r),o=n.value}catch(e){return void a(e)}if(!n.done)return Promise.resolve(o).then(function(e){t("next",e)},function(e){t("throw",e)});i(o)}("next")})}}function j(){return this.storage.channel(this.currentChannel)}function I(e,t){!(2<arguments.length&&void 0!==arguments[2])||arguments[2];k.log.call.apply(k.log,[this.config.get("debug")].concat(Array.prototype.slice.call(arguments)))}function O(e,t){if(!("tag"in e))return!1;var r=[[e.tag+":"+t,"fired"],[e.tag+":*","wildcard-fired"]],n=!0,o=!1,i=void 0;try{for(var a,u=r[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var c=a.value;this.event.emit(c[0],e),I.call(this,"event."+c[1],c[0])}}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}}function F(e){return e.priority=e.priority||0,isNaN(e.priority)&&(e.priority=0),e}function N(o,i,a){return E(h.default.mark(function e(){var t,r,n;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this,e.next=3,g.call(r,o);case 3:return A.call(this,"before",a,o.args),O.call(this,o,"before"),n=Object.values(i.deps||{}),e.t1=(t=a.handle).call.apply(t,[a,o.args].concat(S(n))),e.next=9,m.call(r,o,a);case 9:return e.t2=r,e.t3=e.sent.bind(e.t2),e.t0=e.t1.then.call(e.t1,e.t3),e.next=14,b.call(r,o,a);case 14:e.t4=r,e.t5=e.sent.bind(e.t4),e.t0.catch.call(e.t0,e.t5);case 17:case"end":return e.stop()}},e,this)}))}function T(){this.stop(),clearTimeout(this.currentTimeout),I.call(this,"queue.stopped","stop")}function A(e,t,r){if(!(0,k.hasMethod)(t,e))return!1;"before"==e&&(0,k.isFunction)(t.before)?t.before.call(t,r):"after"==e&&(0,k.isFunction)(t.after)&&t.after.call(t,r)}function P(e,t,r){e?R.call(this,t,r):w.call(this,t,r)}function R(e,t){y.call(this,e._id)}function L(e,t){return"retry"in t||(t.retry=1),"tried"in e||(e.tried=0,e.retry=t.retry),++e.tried,e.tried>=t.retry&&(e.freezed=!0),e}function D(e){var t=this.channels[this.currentChannel];e?(t.forceStop(),I.call(this,"queue.offline","offline")):(setTimeout(t.start.bind(this),2e3),I.call(this,"queue.online","online"))}},{"./queue":21,"./storage-capsule":22,"./utils":25,"babel-runtime/regenerator":1,"is-offline":7}],20:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=e("./queue"),i=(n=o)&&n.__esModule?n:{default:n};window.Queue=i.default,r.default=i.default},{"./queue":21}],21:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var u=n(e("babel-runtime/regenerator")),c=(n(e("./storage/localstorage")),n(e("./container"))),s=n(e("./storage-capsule")),f=n(e("./config")),l=n(e("./event")),d=e("./utils"),h=e("./helpers");function n(e){return e&&e.__esModule?e:{default:e}}function p(e){return function(){var u=e.apply(this,arguments);return new Promise(function(i,a){return function t(e,r){try{var n=u[e](r),o=n.value}catch(e){return void a(e)}if(!n.done)return Promise.resolve(o).then(function(e){t("next",e)},function(e){t("throw",e)});i(o)}("next")})}}var o=function(){function r(e){(function(e){this.channels={},this.config=new f.default(e),this.storage=new s.default(this.config,r.storageDriver),this.timeout=this.config.get("timeout");var t=this.config.get("network");h.createNetworkEvent.call(this,t)}).call(this,e)}var t,n,o,i,a;return r.FIFO="fifo",r.LIFO="lifo",r.prototype.stopped=!0,r.prototype.running=!1,r.prototype.event=new l.default,r.prototype.container=new c.default,r.prototype.add=(t=p(u.default.mark(function e(t){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.canMultiple.call(this,t)){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,h.saveTask.call(this,t);case 4:if(!(r=e.sent)||!this.stopped||!0!==this.running){e.next=8;break}return e.next=8,this.start();case 8:return h.logProxy.call(this,"queue.created",t.handler),e.abrupt("return",r);case 10:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)}),r.prototype.next=p(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.stopped){e.next=3;break}return h.statusOff.call(this),e.abrupt("return",h.stopQueue.call(this));case 3:return h.logProxy.call(this,"queue.next","next"),e.next=6,this.start();case 6:case"end":return e.stop()}},e,this)})),r.prototype.start=p(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.checkNetwork.call(this)){e.next=2;break}return e.abrupt("return",!1);case 2:return this.stopped=!1,h.registerJobs.call(this),h.logProxy.call(this,"queue.starting","start"),e.next=7,h.createTimeout.call(this);case 7:return e.t0=e.sent,this.running=0<e.t0,e.abrupt("return",this.running);case 10:case"end":return e.stop()}},e,this)})),r.prototype.stop=function(){h.logProxy.call(this,"queue.stopping","stop"),this.stopped=!0},r.prototype.forceStop=function(){h.stopQueue.call(this)},r.prototype.create=function(e){return e in this.channels||(this.currentChannel=e,this.channels[e]=(0,d.clone)(this)),this.channels[e]},r.prototype.channel=function(e){if(!this.channels[e])throw new Error('Channel of "'+e+'" not found');return this.channels[e]},r.prototype.isEmpty=p(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.count();case 2:return e.t0=e.sent,e.abrupt("return",e.t0<1);case 4:case"end":return e.stop()}},e,this)})),r.prototype.count=p(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getTasksWithoutFreezed.call(this);case 2:return e.abrupt("return",e.sent.length);case 3:case"end":return e.stop()}},e,this)})),r.prototype.countByTag=(n=p(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getTasksWithoutFreezed.call(this);case 2:return e.t0=function(e){return e.tag===t},e.abrupt("return",e.sent.filter(e.t0).length);case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)}),r.prototype.clear=function(){return!!this.currentChannel&&(this.storage.clear(this.currentChannel),!0)},r.prototype.clearByTag=(o=p(u.default.mark(function e(t){var r=this;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.db.call(this).all();case 2:e.t0=d.utilClearByTag.bind(t),e.t1=function(e){return h.db.call(r).delete(e._id)},e.sent.filter(e.t0).forEach(e.t1);case 5:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)}),r.prototype.has=(i=p(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getTasksWithoutFreezed.call(this);case 2:return e.t0=function(e){return e._id===t},e.t1=e.sent.findIndex(e.t0),e.t2=-1,e.abrupt("return",e.t1>e.t2);case 6:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)}),r.prototype.hasByTag=(a=p(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getTasksWithoutFreezed.call(this);case 2:return e.t0=function(e){return e.tag===t},e.t1=e.sent.findIndex(e.t0),e.t2=-1,e.abrupt("return",e.t1>e.t2);case 6:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)}),r.prototype.setTimeout=function(e){this.timeout=e,this.config.set("timeout",e)},r.prototype.setLimit=function(e){this.config.set("limit",e)},r.prototype.setPrefix=function(e){this.config.set("prefix",e)},r.prototype.setPrinciple=function(e){this.config.set("principle",e)},r.prototype.setDebug=function(e){this.config.set("debug",e)},r.prototype.setNetwork=function(e){this.config.set("network",e),h.removeNetworkEvent.call(this),h.createNetworkEvent.call(this,e)},r.prototype.setStorage=function(e){this.config.set("storage",e)},r.prototype.on=function(e,t){var r;(r=this.event).on.apply(r,arguments),h.logProxy.call(this,"event.created",e)},r.register=function(e){if(!(e instanceof Array))throw new Error("Queue jobs should be objects within an array");r.isRegistered=!1,r.jobs=e},r.storage=function(e){console.log("driver->",e),r.storageDriver=e},r}();r.default=o},{"./config":15,"./container":16,"./event":18,"./helpers":19,"./storage-capsule":22,"./storage/localstorage":24,"./utils":25,"babel-runtime/regenerator":1}],22:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0});var a=o(e("babel-runtime/regenerator")),u="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)},c=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),s=o(e("group-by")),f=(o(e("./storage/localstorage")),o(e("./config")),e("./utils")),l=o(e("./storage/localforage"));function o(e){return e&&e.__esModule?e:{default:e}}function d(e){return function(){var u=e.apply(this,arguments);return new Promise(function(i,a){return function t(e,r){try{var n=u[e](r),o=n.value}catch(e){return void a(e)}if(!n.done)return Promise.resolve(o).then(function(e){t("next",e)},function(e){t("throw",e)});i(o)}("next")})}}var i=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.config=e,this.storage=this.initStorage(t)}var e,t,n,o,i;return c(r,[{key:"initStorage",value:function(e){return"object"===(void 0===e?"undefined":u(e))?e:"function"==typeof e?new e(this.config):new l.default(this.config)}},{key:"channel",value:function(e){return this.storageChannel=e,this}},{key:"fetch",value:(i=d(a.default.mark(function e(){var t,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all();case 2:return e.t0=f.excludeSpecificTasks,t=e.sent.filter(e.t0),r=(0,s.default)(t,"priority"),e.abrupt("return",Object.keys(r).map(function(e){return parseInt(e)}).sort(function(e,t){return t-e}).reduce(this.reduceTasks(r),[]));case 6:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"save",value:(o=d(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.get(this.storageChannel);case 2:return r=e.sent,e.next=5,this.isExceeded();case 5:if(!e.sent){e.next=8;break}return console.warn("Task limit exceeded: The '"+this.storageChannel+"' channel limit is "+this.config.get("limit")),e.abrupt("return",!1);case 8:return t=this.prepareTask(t),r.push(t),e.next=12,this.storage.set(this.storageChannel,r);case 12:return e.abrupt("return",t._id);case 13:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"update",value:(n=d(a.default.mark(function e(t,r){var n,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all();case 2:if(n=e.sent,console.log("ddd->",n),!((o=n.findIndex(function(e){return e._id==t}))<0)){e.next=7;break}return e.abrupt("return",!1);case 7:return n[o]=Object.assign({},n[o],r),e.next=10,this.storage.set(this.storageChannel,n);case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"delete",value:(t=d(a.default.mark(function e(t){var r,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all();case 2:if(r=e.sent,!((n=r.findIndex(function(e){return e._id===t}))<0)){e.next=6;break}return e.abrupt("return",!1);case 6:return delete r[n],e.next=9,this.storage.set(this.storageChannel,r.filter(function(e){return e}));case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"all",value:function(){return this.storage.get(this.storageChannel)}},{key:"generateId",value:function(){return(65536*(1+Math.random())).toString(16)}},{key:"prepareTask",value:function(e){return e.createdAt=Date.now(),e._id=this.generateId(),e}},{key:"reduceTasks",value:function(r){var n=this;return function(e,t){return"lifo"===n.config.get("principle")?e.concat(r[t].sort(f.lifo)):e.concat(r[t].sort(f.fifo))}.bind(this)}},{key:"isExceeded",value:(e=d(a.default.mark(function e(){var t,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.config.get("limit"),e.next=3,this.all();case 3:return e.t0=f.excludeSpecificTasks,r=e.sent.filter(e.t0),console.log("fff->",t,r,!(-1===t||t>r.length)),e.abrupt("return",!(-1===t||t>r.length));case 7:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"clear",value:function(e){this.storage.clear(e)}}]),r}();r.default=i},{"./config":15,"./storage/localforage":23,"./storage/localstorage":24,"./utils":25,"babel-runtime/regenerator":1,"group-by":6}],23:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=n(e("babel-runtime/regenerator")),u=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),c=n(e("localforage"));function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var u=e.apply(this,arguments);return new Promise(function(i,a){return function t(e,r){try{var n=u[e](r),o=n.value}catch(e){return void a(e)}if(!n.done)return Promise.resolve(o).then(function(e){t("next",e)},function(e){t("throw",e)});i(o)}("next")})}}var o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.drivers=["localstorage","indexeddb","websql"],this.config=e,this.prefix=this.config.get("prefix"),c.default.config({driver:this.getDriver(),name:this.prefix})}var e,r,n,o,i;return u(t,[{key:"get",value:(i=s(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.getItem(this.storageName(t));case 2:return r=e.sent,e.abrupt("return",("string"==typeof r?JSON.parse(r):r)||[]);case 4:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"set",value:(o=s(a.default.mark(function e(t,r){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.setItem(this.storageName(t),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e,t){return o.apply(this,arguments)})},{key:"has",value:(n=s(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.keys();case 2:return r=e.sent,e.abrupt("return",-1<r.indexOf(this.storageName(t)));case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"clear",value:(r=s(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.removeItem(this.storageName(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"clearAll",value:(e=s(a.default.mark(function e(){var t,r=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.keys();case 2:return t=e.sent,e.next=5,Promise.all(t.map(function(){var t=s(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.clear(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,r)}));return function(e){return t.apply(this,arguments)}}()));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"storageName",value:function(e){return this.getPrefix()+"_"+e}},{key:"getPrefix",value:function(){return this.config.get("prefix")}},{key:"getDriver",value:function(){var e=this.config.get("defaultStorage"),t=this.config.get("storage").toLowerCase()||e;return-1<this.drivers.indexOf(t)?c.default[t.toUpperCase()]:c.default[e.toUpperCase()]}}]),t}();r.default=o},{"babel-runtime/regenerator":1,localforage:8}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();var o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.storage=localStorage,this.config=e}return n(t,[{key:"get",value:function(e){try{var t=this.storageName(e);return this.has(t)?JSON.parse(this.storage.getItem(t)):[]}catch(e){return[]}}},{key:"set",value:function(e,t){this.storage.setItem(this.storageName(e),t)}},{key:"has",value:function(e){return e in this.storage}},{key:"clear",value:function(e){this.storage.removeItem(this.storageName(e))}},{key:"clearAll",value:function(){this.storage.clear()}},{key:"storageName",value:function(e){return this.getPrefix()+"_"+e}},{key:"getPrefix",value:function(){return this.config.get("prefix")}}]),t}();r.default=o},{}],25:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.clone=function(r){var e=Object.create(Object.getPrototypeOf(r),Object.getOwnPropertyNames(r).reduce(function(e,t){return e[t]=Object.getOwnPropertyDescriptor(r,t),e},{}));Object.isExtensible(r)||Object.preventExtensions(e);Object.isSealed(r)&&Object.seal(e);Object.isFrozen(r)&&Object.freeze(e);return e},r.hasProperty=s,r.hasMethod=function(e,t){return e instanceof Object&&t in e},r.isFunction=function(e){return e instanceof Function},r.excludeSpecificTasks=u,r.utilClearByTag=function(e){if(!u.call(["locked"],e))return!1;return e.tag===this},r.fifo=function(e,t){return e.createdAt-t.createdAt},r.lifo=function(e,t){return t.createdAt-e.createdAt},r.log=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(!0!==this)return void localStorage.removeItem("debug");localStorage.setItem("debug","worker:*"),(0,o.default)("worker:"+t+" ->")(n.default.get(i.default,e))};var n=a(e("object-path")),o=a(e("debug")),i=a(e("./enum/log.events"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e){var t=Array.isArray(this)?this:["freezed","locked"],r=[],n=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var c=a.value;r.push(!1===s(e,c)||!1===e[c])}}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return!(-1<r.indexOf(!1))}},{"./enum/log.events":17,debug:4,"object-path":10}]},{},[20]);